<!DOCTYPE html><html><head><meta charset="utf-8"><title>Java Servlet完全教程</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Servlet 是一些遵从Java Servlet API的Java类，这些Java类可以响应请求。尽管Servlet可以响应任意类型的请求，但是它们使用最广泛的是响应web方面的请求。 Servlet必须部署在Java servlet容器才能使用。虽然很多开发者都使用Java Server Pages（JSP）和Java Server Faces（JSF）等Servlet框架，但是这些技术都要在"><meta property="og:type" content="article"><meta property="og:title" content="Java Servlet完全教程"><meta property="og:url" content="https://colobu.com/2015/01/26/complete-java-servlets-tutorial/"><meta property="og:site_name" content="鸟窝"><meta property="og:description" content="Servlet 是一些遵从Java Servlet API的Java类，这些Java类可以响应请求。尽管Servlet可以响应任意类型的请求，但是它们使用最广泛的是响应web方面的请求。 Servlet必须部署在Java servlet容器才能使用。虽然很多开发者都使用Java Server Pages（JSP）和Java Server Faces（JSF）等Servlet框架，但是这些技术都要在"><meta property="og:image" content="http://howtodoinjava.com/wp-content/uploads/2014/12/servlet-example.png"><meta property="og:image" content="http://howtodoinjava.com/wp-content/uploads/2014/12/dynamic-content-in-servlet.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Java Servlet完全教程"><meta name="twitter:description" content="Servlet 是一些遵从Java Servlet API的Java类，这些Java类可以响应请求。尽管Servlet可以响应任意类型的请求，但是它们使用最广泛的是响应web方面的请求。 Servlet必须部署在Java servlet容器才能使用。虽然很多开发者都使用Java Server Pages（JSP）和Java Server Faces（JSF）等Servlet框架，但是这些技术都要在"><link rel="alternative" href="/atom.xml" title="鸟窝" type="application/atom+xml"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/style.css" type="text/css"><link href="//cdn.staticfile.org/font-awesome/4.2.0/css/font-awesome.css" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/css/jquery.fancybox.min.css" media="screen" type="text/css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" media="screen" type="text/css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.207/distr/fira_code.css"></head><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap" class="animated bounceInLeft"><a href="/" id="logo">鸟窝</a></h1><h2 id="subtitle-wrap" class="animated bounceInLeft"><a href="/" id="subtitle">大道至简 Simplicity is the ultimate form of sophistication</a></h2></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/"><i class="fa fa-home">&nbsp;</i>首页</a> <a class="main-nav-link" href="/archives"><i class="fa fa-folder-o">&nbsp;</i>归档</a> <a class="main-nav-link" href="https://github.com/smallnest"><i class="fa fa-github">&nbsp;</i>github</a><div class="dropdown main-nav-link"><a class="main-nav-link" href="#"><i class="fa fa-bars">&nbsp;</i>网站群</a><div class="dropdown-content"><a href="/goasm"><i class="fa fa-language"></i>&nbsp;Go汇编示例</a> <a href="https://gowebexamples.com"><i class="fa fa-external-link"></i>&nbsp;Go Web开发示例</a> <a href="http://go-database-sql.org"><i class="fa fa-external-link"></i>&nbsp;Go 数据库开发教程</a><hr><a href="http://rpcx.io"><i class="fa undefined"></i>&nbsp;RPCX官网</a> <a href="http://cn.doc.rpcx.io"><i class="fa undefined"></i>&nbsp;RPC开发指南</a></div></div><a class="main-nav-link" href="/ScalaCollectionsCookbook"><i class="fa fa-book">&nbsp;</i>Scala集合技术手册</a> <a class="main-nav-link" href="/about"><i class="fa fa-lemon-o">&nbsp;</i>关于</a></nav><nav id="sub-nav"><a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a> <a id="nav-search-btn" class="nav-icon" title="Search"></a></nav><div id="search-form-wrap"><form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form"><input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search"> <input type="submit" class="search-form-submit"> <input name="tn" type="hidden" value="bds"> <input name="cl" type="hidden" value="3"> <input name="ct" type="hidden" value="2097152"> <input type="hidden" name="si" value="colobu.com"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-complete-java-servlets-tutorial" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2015/01/26/complete-java-servlets-tutorial/" class="article-date"><time datetime="2015-01-26T05:20:24.000Z" itemprop="datePublished">2015年01月26日</time></a><div class="article-category"><a class="article-category-link" href="/categories/Java/">Java</a></div><div class="article-author">by Lokesh Gupta</div></div><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">Java Servlet完全教程</h1></header><div class="article-entry" itemprop="articleBody"><h1 id="expanderHead" style="cursor:pointer">目录 <span id="expanderSign">[−]</span></h1><div id="article-entry-toc" data-role="collapsible" class="article-entry-toc"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#编写你的第一个Servlet"><span class="toc-text">编写你的第一个Servlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet生命周期方法"><span class="toc-text">Servlet生命周期方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用@WebServlet注解来开发Servlet"><span class="toc-text">使用@WebServlet注解来开发Servlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#打包和部署Servlet到Tomcat服务器"><span class="toc-text">打包和部署Servlet到Tomcat服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编写动态的Servlet响应内容"><span class="toc-text">编写动态的Servlet响应内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#处理Servlet请求和响应"><span class="toc-text">处理Servlet请求和响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#监听Servlet容器事件"><span class="toc-text">监听Servlet容器事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#传递Servlet初始化参数"><span class="toc-text">传递Servlet初始化参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为特定的URL请求添加Servlet过滤器"><span class="toc-text">为特定的URL请求添加Servlet过滤器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用Servlet下载二进制文件"><span class="toc-text">使用Servlet下载二进制文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用RequestDispatcher-forward()转发请求到另一个Servlet"><span class="toc-text">使用RequestDispatcher.forward()转发请求到另一个Servlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用HttpServletResponse-sendRedirect()重定向请求到另一个Servlet"><span class="toc-text">使用HttpServletResponse.sendRedirect()重定向请求到另一个Servlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用Servlet读写Cookie"><span class="toc-text">使用Servlet读写Cookie</span></a></li></ol></div><script>function show_answer(e,l){"显示答案"===e.value?e.value="隐藏答案":e.value="显示答案";var n=document.getElementById(l);"none"===n.style.display?n.style.display="block":n.style.display="none"}</script><p>Servlet 是一些遵从Java Servlet API的Java类，这些Java类可以响应请求。尽管Servlet可以响应任意类型的请求，但是它们使用最广泛的是响应web方面的请求。 Servlet必须部署在Java servlet容器才能使用。虽然很多开发者都使用Java Server Pages（JSP）和Java Server Faces（JSF）等Servlet框架，但是这些技术都要在幕后通过Servlet容器把页面编译为Java Servlet。也就是说，了解Java Servlet技术的基础知识对任何Java web开发者来说是很有用的。</p><p>在这个教程里，我们将会通过下面的专题来全面了解Java Servlet技术。</p><p>让我们一起来一步步地学习Servlet。<br><a id="more"></a></p><h3 id="编写你的第一个Servlet">编写你的第一个Servlet</h3><p>我们的第一个Servlet是一个只拥有少量代码的简单Servlet，目的是让你只需关注它的行为。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.howtodoinjava.servlets;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"> </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFirstServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">1915463532411657451</span>L;</div><div class="line"> </div><div class="line">    <span class="annotation">@Override</span></div><div class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span>(HttpServletRequest request,</div><div class="line">            HttpServletResponse response) <span class="keyword">throws</span> ServletException, IOException</div><div class="line">    {</div><div class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">        PrintWriter out = response.getWriter();</div><div class="line">        <span class="keyword">try</span> {</div><div class="line">            <span class="comment">// Write some content</span></div><div class="line">            out.println(<span class="string">"&lt;html&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;head&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;title&gt;MyFirstServlet&lt;/title&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;/head&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;body&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;h2&gt;Servlet MyFirstServlet at "</span> + request.getContextPath() + <span class="string">"&lt;/h2&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;/body&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;/html&gt;"</span>);</div><div class="line">        } <span class="keyword">finally</span> {</div><div class="line">            out.close();</div><div class="line">        }</div><div class="line">    }</div><div class="line">     </div><div class="line">    <span class="annotation">@Override</span></div><div class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span>(HttpServletRequest request,</div><div class="line">            HttpServletResponse response) <span class="keyword">throws</span> ServletException, IOException {</div><div class="line">        <span class="comment">//Do some other work</span></div><div class="line">    }</div><div class="line"> </div><div class="line">    <span class="annotation">@Override</span></div><div class="line">    <span class="keyword">public</span> String <span class="title">getServletInfo</span>() {</div><div class="line">        <span class="keyword">return</span> <span class="string">"MyFirstServlet"</span>;</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure><p><strong>为了在web容器里注册上面的Servlet，你要为你的应用建一个web.xml入口文件。</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="pi">&lt;?xml version="1.0"?&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">web-app</span>     <span class="attribute">xmlns</span>=<span class="value">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></div><div class="line">            <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">            <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://xmlns.jcp.org/xml/ns/javaee</span></div><div class="line"> </div><div class="line">http://xmlns.jcp.org/xml/ns/javaee/web-app_3_0.xsd"</div><div class="line"> </div><div class="line">            <span class="attribute">version</span>=<span class="value">"3.0"</span>&gt;</div><div class="line">             </div><div class="line">    <span class="tag">&lt;<span class="title">welcome-file-list</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">welcome-file</span>&gt;</span>/MyFirstServlet<span class="tag">&lt;/<span class="title">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">welcome-file-list</span>&gt;</span></div><div class="line">     </div><div class="line">    <span class="tag">&lt;<span class="title">servlet</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">servlet-name</span>&gt;</span>MyFirstServlet<span class="tag">&lt;/<span class="title">servlet-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">servlet-class</span>&gt;</span>com.howtodoinjava.servlets.MyFirstServlet<span class="tag">&lt;/<span class="title">servlet-class</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">servlet</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">servlet-mapping</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">servlet-name</span>&gt;</span>MyFirstServlet<span class="tag">&lt;/<span class="title">servlet-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">url-pattern</span>&gt;</span>/MyFirstServlet<span class="tag">&lt;/<span class="title">url-pattern</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">servlet-mapping</span>&gt;</span></div><div class="line">     </div><div class="line"><span class="tag">&lt;/<span class="title">web-app</span>&gt;</span></div></pre></td></tr></table></figure><p>上面的Servlet做了一些重要的事情，你可能想了解的。</p><ol><li>MyFirstServlet类继承了HttpServlet。这个继承是必须的，因为所有的Servlet必须是要么继承了 javax.servlet.GenericServlet 的普通Servlet，要么是继承了 javax.servlet.http.HttpServlet 的HTTP Servlet。</li><li>重新 doGet() 和 doPost() 方法。这两个方法都已在 HttpServlet 类里定义了。当一个GET或POST请求到来时，它就会被映射到相应的方法里。例如，如果你向这个servlet发送一个HTTP GET请求，doGet()方法就会被调用。</li><li>这里也有一些其他有用的方法。你可以重写它们来在运行时控制应用。例如getServletInfo()。</li><li>HttpServletRequest 和 HttpServletResponse 是所有doXXX()方法的默认参数。我们会在后面的章节里详细学习这些对象。</li></ol><p>以上所有关于简单Servlet的内容就是你需要知道的内容。</p><h3 id="Servlet生命周期方法">Servlet生命周期方法</h3><p>在你的应用加载并使用一个Servlet时，从初始化到销毁这个Servlet期间会发生一系列的事件。这些事件叫做Servlet的<strong>生命周期事件（或方法）</strong>。让我们一起来进一步了解它们。</p><p>Servlet生命周期的三个核心方法分别是 <code>init()</code> , <code>service()</code> 和 <code>destroy()</code>。每个Servlet都会实现这些方法，并且在特定的运行时间调用它们。</p><p>1) 在Servlet生命周期的初始化阶段，<strong>web容器通过调用init()方法来初始化Servlet实例</strong>，并且可以传递一个实现 javax.servlet.ServletConfig 接口的对象给它。这个配置对象（configuration object）使Servlet能够读取在web应用的web.xml文件里定义的名值（name-value）初始参数。<strong>这个方法在Servlet实例的生命周期里只调用一次</strong>。<br>init方法定义与这类似：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">init</span>() <span class="keyword">throws</span> ServletException {</div><div class="line">    <span class="comment">//custom initialization code</span></div><div class="line">}</div></pre></td></tr></table></figure><p>2) 初始化后，Servlet实例就可以处理客户端请求了。<strong>web容器调用Servlet的service()方法来处理每一个请求</strong>。<code>service()</code> 方法定义了能够处理的请求类型并且调用适当方法来处理这些请求。编写Servlet的开发者必须为这些方法提供实现。如果发出一个Servlet没实现的请求，那么父类的方法就会被调用并且通常会给请求方（requester）返回一个错误信息。</p><p>通常，我们不需要重写（override）这个方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span>(HttpServletRequest req, HttpServletResponse resp)</div><div class="line">    <span class="keyword">throws</span> ServletException, IOException</div><div class="line">{</div><div class="line">	String method = req.getMethod();</div><div class="line">	 </div><div class="line">	<span class="keyword">if</span> (method.equals(METHOD_GET)) {</div><div class="line">		<span class="keyword">long</span> lastModified = getLastModified(req);</div><div class="line">		<span class="keyword">if</span> (lastModified == -<span class="number">1</span>) {</div><div class="line">		<span class="comment">// servlet doesn't support if-modified-since, no reason</span></div><div class="line">		<span class="comment">// to go through further expensive logic</span></div><div class="line">		doGet(req, resp);</div><div class="line">		} <span class="keyword">else</span> {</div><div class="line">		<span class="keyword">long</span> ifModifiedSince = req.getDateHeader(HEADER_IFMODSINCE);</div><div class="line">		<span class="keyword">if</span> (ifModifiedSince &lt; (lastModified / <span class="number">1000</span> * <span class="number">1000</span>)) {</div><div class="line">			<span class="comment">// If the servlet mod time is later, call doGet()</span></div><div class="line">					<span class="comment">// Round down to the nearest second for a proper compare</span></div><div class="line">					<span class="comment">// A ifModifiedSince of -1 will always be less</span></div><div class="line">			maybeSetLastModified(resp, lastModified);</div><div class="line">			doGet(req, resp);</div><div class="line">		} <span class="keyword">else</span> {</div><div class="line">			resp.setStatus(HttpServletResponse.SC_NOT_MODIFIED);</div><div class="line">		}</div><div class="line">		}</div><div class="line">	 </div><div class="line">	} <span class="keyword">else</span> <span class="keyword">if</span> (method.equals(METHOD_HEAD)) {</div><div class="line">		<span class="keyword">long</span> lastModified = getLastModified(req);</div><div class="line">		maybeSetLastModified(resp, lastModified);</div><div class="line">		doHead(req, resp);</div><div class="line">	 </div><div class="line">	} <span class="keyword">else</span> <span class="keyword">if</span> (method.equals(METHOD_POST)) {</div><div class="line">		doPost(req, resp);</div><div class="line">	 </div><div class="line">	} <span class="keyword">else</span> <span class="keyword">if</span> (method.equals(METHOD_PUT)) {</div><div class="line">		doPut(req, resp);  </div><div class="line">	 </div><div class="line">	} <span class="keyword">else</span> <span class="keyword">if</span> (method.equals(METHOD_DELETE)) {</div><div class="line">		doDelete(req, resp);</div><div class="line">	 </div><div class="line">	} <span class="keyword">else</span> <span class="keyword">if</span> (method.equals(METHOD_OPTIONS)) {</div><div class="line">		doOptions(req,resp);</div><div class="line">	 </div><div class="line">	} <span class="keyword">else</span> <span class="keyword">if</span> (method.equals(METHOD_TRACE)) {</div><div class="line">		doTrace(req,resp);</div><div class="line">	 </div><div class="line">	} <span class="keyword">else</span> {</div><div class="line">		<span class="comment">//</span></div><div class="line">		<span class="comment">// Note that this means NO servlet supports whatever</span></div><div class="line">		<span class="comment">// method was requested, anywhere on this server.</span></div><div class="line">		<span class="comment">//</span></div><div class="line">	 </div><div class="line">		String errMsg = lStrings.getString(<span class="string">"http.method_not_implemented"</span>);</div><div class="line">		Object[] errArgs = <span class="keyword">new</span> Object[<span class="number">1</span>];</div><div class="line">		errArgs[<span class="number">0</span>] = method;</div><div class="line">		errMsg = MessageFormat.format(errMsg, errArgs);</div><div class="line">	 </div><div class="line">		resp.sendError(HttpServletResponse.SC_NOT_IMPLEMENTED, errMsg);</div><div class="line">	}</div><div class="line">}</div></pre></td></tr></table></figure><p>3) 最后，<strong>web容器调用destroy()方法来终结Servlet</strong>。如果你想在Servlet的生命周期内关闭或者销毁一些文件系统或者网络资源，你可以调用这个方法来实现。destroy() 方法和init()方法一样，在Servlet的生命周期里只能调用一次。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span>() {</div><div class="line"><span class="comment">//</span></div><div class="line">}</div></pre></td></tr></table></figure><p>在大多数情况下，你通常不需要在你的Servlet里重写这些方法。</p><blockquote><p>扩展阅读： <a href="http://howtodoinjava.com/2013/10/03/a-birds-eye-view-on-how-web-servers-work/" target="_blank" rel="external">web服务器是如何运作的？</a></p></blockquote><h3 id="使用@WebServlet注解来开发Servlet">使用@WebServlet注解来开发Servlet</h3><p>如果你不喜欢使用xml配置而喜欢注解的话，没关系，Servlets API同样提供了一些注解接口给你。你可以像下面的例子一样使用 <a href="https://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebServlet.html" target="_blank" rel="external">@WebServlet</a> 注解并且不需要在web.xml里为Servlet注册任何信息。<strong>容器会自动注册你的Servlet到运行环境，并且像往常一样处理它</strong>。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.howtodoinjava.servlets;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"> </div><div class="line"><span class="annotation">@WebServlet</span>(name = <span class="string">"MyFirstServlet"</span>, urlPatterns = {<span class="string">"/MyFirstServlet"</span>})</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFirstServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">1915463532411657451</span>L;</div><div class="line"> </div><div class="line">    <span class="annotation">@Override</span></div><div class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span>(HttpServletRequest request,</div><div class="line">            HttpServletResponse response) <span class="keyword">throws</span> ServletException, IOException</div><div class="line">    {</div><div class="line">        <span class="comment">//Do some work</span></div><div class="line">    }</div><div class="line"> </div><div class="line">    <span class="annotation">@Override</span></div><div class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span>(HttpServletRequest request,</div><div class="line">            HttpServletResponse response) <span class="keyword">throws</span> ServletException, IOException {</div><div class="line">        <span class="comment">//Do some other work</span></div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure><h3 id="打包和部署Servlet到Tomcat服务器">打包和部署Servlet到Tomcat服务器</h3><p>如果你在使用IDE（例如Eclipse），那么打包和部署你的应用只需要一个简单的步骤。右击项目&gt; Run As &gt; Run As Server。如果还没配置服务器先配置好服务器，然后就可以准备开干了。</p><p>如果你没在使用IDE，那么你需要做一些额外的工作。比如，使用命令提示符编译应用，使用ANT去生成war文件等等。但我相信，现在的开发者都在使用IDE来开发。所以我就不在这方面浪费时间了。</p><p>当你把我们的第一个Servlet部署到tomcat上并在浏览器输入“<a href="http://localhost:8080/servletexamples/MyFirstServlet”，你会得到下面的响应。" target="_blank" rel="external">http://localhost:8080/servletexamples/MyFirstServlet”，你会得到下面的响应。</a><br><img src="http://howtodoinjava.com/wp-content/uploads/2014/12/servlet-example.png" alt=""></p><h3 id="编写动态的Servlet响应内容">编写动态的Servlet响应内容</h3><p>Java Servlets如此有用的原因之一是Servlet能动态显示网页内容。这些内容可以从服务器本身、另外一个网站、或者许多其他网络可以访问的资源里获取。Servlet不是静态网页，它们是动态的。可以说这是它们最大的优势。</p><p>让我们来举个Servlet例子，这个Servlet会显示当前日期和时间给用户并且会显示用户名和一些自定义的信息。让我们来为这个功能编写代码吧。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.howtodoinjava.servlets;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"><span class="keyword">import</span> java.util.HashMap;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"> </div><div class="line"><span class="annotation">@WebServlet</span>(name = <span class="string">"CalendarServlet"</span>, urlPatterns = {<span class="string">"/CalendarServlet"</span>})</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CalendarServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>{</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">1915463532411657451</span>L;</div><div class="line"> </div><div class="line">    <span class="annotation">@Override</span></div><div class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span>(HttpServletRequest request,</div><div class="line">            HttpServletResponse response) <span class="keyword">throws</span> ServletException, IOException</div><div class="line">    {</div><div class="line"> </div><div class="line">        Map&lt;String,String&gt; data = getData();</div><div class="line"> </div><div class="line">        response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">        PrintWriter out = response.getWriter();</div><div class="line">        <span class="keyword">try</span> {</div><div class="line">            <span class="comment">// Write some content</span></div><div class="line">            out.println(<span class="string">"&lt;html&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;head&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;title&gt;CalendarServlet&lt;/title&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;/head&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;body&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;h2&gt;Hello "</span> + data.get(<span class="string">"username"</span>) + <span class="string">", "</span> + data.get(<span class="string">"message"</span>) + <span class="string">"&lt;/h2&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;h2&gt;The time right now is : "</span> + <span class="keyword">new</span> Date() + <span class="string">"&lt;/h2&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;/body&gt;"</span>);</div><div class="line">            out.println(<span class="string">"&lt;/html&gt;"</span>);</div><div class="line">        } <span class="keyword">finally</span> {</div><div class="line">            out.close();</div><div class="line">        }</div><div class="line">    }</div><div class="line"> </div><div class="line">    <span class="comment">//This method will access some external system as database to get user name, and his personalized message</span></div><div class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; <span class="title">getData</span>()</div><div class="line">    {</div><div class="line">        Map&lt;String, String&gt; data = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</div><div class="line">        data.put(<span class="string">"username"</span>, <span class="string">"Guest"</span>);</div><div class="line">        data.put(<span class="string">"message"</span>,  <span class="string">"Welcome to my world !!"</span>);</div><div class="line">        <span class="keyword">return</span> data;</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure><p>当你在tomcat里运行上面的Servlet并在浏览器里输入“<a href="http://localhost:8080/servletexamples/CalendarServlet”，你会得得下面的响应。" target="_blank" rel="external">http://localhost:8080/servletexamples/CalendarServlet”，你会得得下面的响应。</a><br><img src="http://howtodoinjava.com/wp-content/uploads/2014/12/dynamic-content-in-servlet.png" alt=""></p><h3 id="处理Servlet请求和响应">处理Servlet请求和响应</h3><p>Servlet可以轻松创建一个基于请求和响应生命周期的web应用。它们能够提供HTTP响应并且可以使用同一段代码来处理业务逻辑。处理业务逻辑的能力使Servlet比标准的HTML代码更强大。</p><p>现实世界里的应用，一个HTML网页表单包含了要发送给Servlet的参数。Servlet会以某种方式来处理这些参数并且 返回一个客户端能够识别的响应。在对象是HttpServlet的情况下，客户端是web浏览器，响应是web页面。<form>的 action属性指定了使用哪个Servlet来处理表单里的参数值。</form></p><p>为了获取请求参数，需要调用 HttpServletRequest 对象的 getParameter() 方法，并且传递你要获取的输入参数的id给该方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String value1 = req.getParameter(<span class="string">"param1"</span>);</div><div class="line">String value1 = req.getParameter(<span class="string">"param2"</span>);</div></pre></td></tr></table></figure><p>一旦获取了参数值，它们就会在需要时被处理。对客户端的响应和我们上面部分讨论的一样。我们使用 HttpServletResponse 对象给客户端发送响应。</p><p>request和response处理的基本使用可以是这样的：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="annotation">@Override</span></div><div class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span>(HttpServletRequest request,</div><div class="line">        HttpServletResponse response) <span class="keyword">throws</span> ServletException, IOException</div><div class="line">{</div><div class="line"> </div><div class="line">    response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">    PrintWriter out = response.getWriter();</div><div class="line"> </div><div class="line">    String username = request.getParameter(<span class="string">"username"</span>);</div><div class="line">    String password = request.getParameter(<span class="string">"password"</span>);</div><div class="line"> </div><div class="line">    <span class="keyword">boolean</span> success = validateUser(username, password);</div><div class="line"> </div><div class="line">    <span class="keyword">try</span> {</div><div class="line">        <span class="comment">// Write some content</span></div><div class="line">        out.println(<span class="string">"&lt;html&gt;"</span>);</div><div class="line">        out.println(<span class="string">"&lt;head&gt;"</span>);</div><div class="line">        out.println(<span class="string">"&lt;title&gt;LoginServlet&lt;/title&gt;"</span>);</div><div class="line">        out.println(<span class="string">"&lt;/head&gt;"</span>);</div><div class="line">        out.println(<span class="string">"&lt;body&gt;"</span>);</div><div class="line"> </div><div class="line">        <span class="keyword">if</span>(success) {</div><div class="line">            out.println(<span class="string">"&lt;h2&gt;Welcome Friend&lt;/h2&gt;"</span>);</div><div class="line">        }<span class="keyword">else</span>{</div><div class="line">            out.println(<span class="string">"&lt;h2&gt;Validate your self again.&lt;/h2&gt;"</span>);</div><div class="line">        }</div><div class="line"> </div><div class="line">        out.println(<span class="string">"&lt;/body&gt;"</span>);</div><div class="line">        out.println(<span class="string">"&lt;/html&gt;"</span>);</div><div class="line">    } <span class="keyword">finally</span> {</div><div class="line">        out.close();</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure><p>为了发送内容给客户端，你需要使用从 HttpServletResponse 里获取的 PrintWriter 对象。任何写到这个对象的内容都会被写进outputstream里，并会把内容发送回给客户端。</p><h3 id="监听Servlet容器事件">监听Servlet容器事件</h3><p>有时候，知道应用服务器容器（the application server container）里某些事件发生的时间是很有用的。这个概念适用于很多情况，但它通常用在开启应用时初始化应用或者关闭应用时清理应用。可以在应用里 注册一个监听器（listener）来显示应用什么时候开启或者关闭。因此，通过监听这些事件，Servlet可以在一些事件发生时执行相应的动作。</p><p>为了创建一个基于容器事件执行动作的监听器，你必须创建一个实现 ServletContextListener 接口的类。这个类必须实现的方法有 contextInitialized() 和 contextDestroyed()。这两个方法都需要 ServletContextEvent 作为参数，并且在每次初始化或者关闭Servlet容器时都会被自动调用。</p><p>为了在容器注册监听器，你可以使用下面其中一个方法：<br>1) 利用 @WebListener 注解。<br>2) 在web.xml应用部署文件里注册监听器。<br>3) 使用 ServletContext 里定义的 addListener() 方法</p><p>请注意，ServletContextListener 不是Servlet API里唯一的监听器。这里还有一些其他的监听器，比如</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">javax.servlet.ServletRequestListener</div><div class="line">javax.servlet.ServletRequestAttrbiteListener</div><div class="line">javax.servlet.ServletContextListener</div><div class="line">javax.servlet.ServletContextAttributeListener</div><div class="line">javax.servlet.HttpSessionListener</div><div class="line">javax.servlet.HttpSessionAttributeListener</div></pre></td></tr></table></figure><p>根据你要监听的事件选择他们来实现你的监听器类。比如，每当创建或销毁一个用户session时，HttpSessionListener 就会发出通知。</p><h3 id="传递Servlet初始化参数">传递Servlet初始化参数</h3><p>现在的大多数应用都需要设置一些在应用/控制器（controller）启动时可以传递的配置参数（configuration parameters）。Servlet同样可以接受初始化参数，并在处理第一个请求前来使用它们来构建配置参数。</p><p>显然，你也可以在Servlet里硬编码配置值。但是这样做的话，在Servlet发生改动时你需要再次重新编译整个应用。没有人喜欢这样做。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">web-app</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">servlet</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">servlet-name</span>&gt;</span>SimpleServlet<span class="tag">&lt;/<span class="title">servlet-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">servlet-class</span>&gt;</span>com.howtodoinjava.servlets.SimpleServlet<span class="tag">&lt;/<span class="title">servlet-class</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="comment">&lt;!-- Servlet init param --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">init-param</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="title">param-name</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="title">param-value</span>&gt;</span>value<span class="tag">&lt;/<span class="title">param-value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="title">init-param</span>&gt;</span></div><div class="line"> </div><div class="line">    <span class="tag">&lt;/<span class="title">servlet</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="title">web-app</span>&gt;</span></div></pre></td></tr></table></figure><p>设置后，你就可以在代码里调用 getServletConfig.getInitializationParameter() 并传递参数名给该方法来使用参数。就像下面展示的代码一样：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String value = getServletConfig().getInitParameter(<span class="string">"name"</span>);</div></pre></td></tr></table></figure><h3 id="为特定的URL请求添加Servlet过滤器">为特定的URL请求添加Servlet过滤器</h3><p>Web过滤器在给定的URL被访问时对请求进行预处理并调用相应的功能是很有用的。相 比于直接调用给定URL请求的Servlet，包含相同URL模式的过滤器（filter）会在Servlet调用前被调用。这在很多情况下是很有用的。 或许最大的用处就是执行日志，验证或者其他不需要与用户交互的后台服务。</p><p>过滤器必须要实现 javax.servlet.Filter 接口。这个接口包含了init()，descriptor()和doFilter()这些方法。init()和destroy()方法会被容器调用。 doFilter()方法用来在过滤器类里实现逻辑任务。如果你想把过滤器组成过滤链（chain filter）或者存在多匹配给定URL模式的个过滤器，它们就会根据web.xml里的配置顺序被调用。</p><p>为了在web.xml里配置过滤器，需要使用<filter>和<filter-mapping>XML元素以及相关的子元素标签。</filter-mapping></filter></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">filter-name</span>&gt;</span>LoggingFilter<span class="tag">&lt;/<span class="title">filter-name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">filter-class</span>&gt;</span>LoggingFilter<span class="tag">&lt;/<span class="title">filter-class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">filter-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">filter-name</span>&gt;</span>LogingFilter<span class="tag">&lt;/<span class="title">filter-name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="title">url-pattern</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">filter-mapping</span>&gt;</span></div></pre></td></tr></table></figure><p><em>如果你要使用注解来为特定的servlet配置过滤器，你可以使用@WebFilter注解。</em></p><h3 id="使用Servlet下载二进制文件">使用Servlet下载二进制文件</h3><p>几乎所有的web应用都必须有下载文件的功能。为了下载一个文件，Servlet必须提供一个和下载文件类型匹配的响应类型。同样，必须在响应头里指出该响应包含附件。就像下面的代码。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">String mimeType = context.getMimeType( fileToDownload );</div><div class="line">response.setContentType( mimeType != <span class="keyword">null</span> ? mimeType : <span class="string">"text/plain"</span> );</div><div class="line">response.setHeader( <span class="string">"Content-Disposition"</span>, <span class="string">"attachment; filename="</span><span class="string">" + fileToDownload + "</span><span class="string">""</span> );</div></pre></td></tr></table></figure><p>通过调用 ServletContext.getResourceAsStream() 方法并传递文件路径给该方法，你可以获取要下载的文件（文件保存在文件系统）的引用。这个方法会返回一个输入流（InputStream）对 象，我们可以用这个对象来读取文件内容。当读取文件时，我们创建一个字节缓存区（byte buffer）从文件里获取数据块。最后的工作就是读取文件内容并且把它们复制到输出流。我们使用while循环来完成文件的读取，这个循环直到读取了文 件的所有内容才会跳出循环。我们使用循环来读进数据块并把它写进输出流。把所有数据写进输出流后，ServletOutputStream 对象的flush方法就会被调用并且清空内容和释放资源。</p><p>看这段简单的代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">downloadFile</span>(HttpServletRequest request, HttpServletResponse response, String fileToDownload) <span class="keyword">throws</span> IOException</div><div class="line">   {</div><div class="line">       <span class="keyword">final</span> <span class="keyword">int</span> BYTES = <span class="number">1024</span>;</div><div class="line">       <span class="keyword">int</span> length = <span class="number">0</span>;</div><div class="line"></div><div class="line">       ServletOutputStream outStream = response.getOutputStream();</div><div class="line">       ServletContext context = getServletConfig().getServletContext();</div><div class="line"></div><div class="line">       String mimeType = context.getMimeType( fileToDownload );</div><div class="line">       response.setContentType( mimeType != <span class="keyword">null</span> ? mimeType : <span class="string">"text/plain"</span> );</div><div class="line">       response.setHeader( <span class="string">"Content-Disposition"</span>, <span class="string">"attachment; filename="</span><span class="string">" + fileToDownload + "</span><span class="string">""</span> );</div><div class="line"></div><div class="line">       InputStream in = context.getResourceAsStream(<span class="string">"/"</span> + fileToDownload);</div><div class="line"></div><div class="line">       <span class="keyword">byte</span>[] bbuf = <span class="keyword">new</span> <span class="keyword">byte</span>[BYTES];</div><div class="line"></div><div class="line">       <span class="keyword">while</span> ((in != <span class="keyword">null</span>) && ((length = in.read(bbuf)) != -<span class="number">1</span>)) {</div><div class="line">           outStream.write(bbuf, <span class="number">0</span>, length);</div><div class="line">       }</div><div class="line"></div><div class="line">       outStream.flush();</div><div class="line">       outStream.close();</div><div class="line">   }</div></pre></td></tr></table></figure><h3 id="使用RequestDispatcher-forward()转发请求到另一个Servlet">使用RequestDispatcher.forward()转发请求到另一个Servlet</h3><p>有时候，你的应用需要把一个Servlet要处理的请求转让给另外的Servlet来处理并完成任务。而且，转让请求时不能重定向客户端的URL。即浏览器地址栏上的URL不会改变。</p><p>在 ServletContext 里已经内置了实现上面需求的方法。所以，当你获取了 ServletContext 的引用，你就可以简单地调用getRequestDispatcher() 方法去获取用来转发请求的 RequestDispatcher 对象。当调用 getRequestDispatcher() 方法时，需要传递包含servlet名的字符串，这个Servlet就是你用来处理转让请求的Servlet。获取 RequestDispatcher 对象后，通过传递 HttpServletRequest 和HttpServletResponse 对象给它来调用转发方法。转发方法负责对请求进行转发。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">RequestDispatcher rd = servletContext.getRequestDispatcher(<span class="string">"/NextServlet"</span>);</div><div class="line">rd.forward(request, response);</div></pre></td></tr></table></figure><h3 id="使用HttpServletResponse-sendRedirect()重定向请求到另一个Servlet">使用HttpServletResponse.sendRedirect()重定向请求到另一个Servlet</h3><p>尽管有时候，你不想在Servlet发送重定向时通知用户，就像我们在上面那段看到的一样。但是在某些情况下，我们确实想要通知用户。当应用内的特定URL被访问时，你想把浏览器的URL重定向到另外一个。</p><p>要实现这种功能，你需要调用 HttpServletResponse 对象的sendRedirect()方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">httpServletResponse.sendRedirect(<span class="string">"/anotherURL"</span>);</div></pre></td></tr></table></figure><p>这个简单的重定向，与servlet链（servlet chaining）相反，不需要传递自己的HttpRequest对象给目标地址。</p><h3 id="使用Servlet读写Cookie">使用Servlet读写Cookie</h3><p>很多应用都想在客户端机器里保存用户当前的浏览历史。目的是当用户再次使用应用时，他能够从上次离开的地方开始浏览。为了实现这个需求，通常使用cookies。你可以把它看作是保存在客户端机器里的键值对基本数据。当使用浏览器打开应用时，应用可以对这些数据进行读写。</p><p>为了创建cookie，需要实例化一个新的 javax.servlet.http.Cookie 对象并且为它分配名称和值。实例化cookie后，可以设置属性来配置cookie。在这个例子里，我们使用 setMaxAge() 和 setHttpOnly() 方法来设置cookie的生命周期和防范客户端脚本。</p><p><em>从Servlet3.0 API开始，已经可以把cookie标记为HTTP only了。这使cookie可以防范客户端脚本的攻击，使cookie更加安全。</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"sessionId"</span>,<span class="string">"123456789"</span>);</div><div class="line">cookie.setHttpOnly(<span class="keyword">true</span>);</div><div class="line">cookie.setMaxAge(-<span class="number">30</span>);</div><div class="line">response.addCookie(cookie);</div></pre></td></tr></table></figure><p>这里的response是传递给doXXX()方法的 HttpServletResponse 实例。</p><p>要读取服务端的cookie信息，使用下面代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Cookie[] cookies = request.getCookies();</div><div class="line"><span class="keyword">for</span>(Cookie cookie : cookies)</div><div class="line">{</div><div class="line">    <span class="comment">//cookie.getName();</span></div><div class="line">    <span class="comment">//cookie.getValue()</span></div><div class="line">}</div></pre></td></tr></table></figure><p>这就是这篇教程里关于Servlet技术的全部内容了。欢迎评论和回馈。</p><hr><p>原文链接： <a href="http://howtodoinjava.com/2014/12/08/complete-java-servlets-tutorial/" target="_blank" rel="external">howtodoinjava</a> 翻译： <a href="http://www.importnew.com/author/8zjl8" target="_blank" rel="external">ImportNew.com - 进林</a></p><p>译文链接： <a href="http://www.importnew.com/14621.html" target="_blank" rel="external">http://www.importnew.com/14621.html</a></p></div><footer class="article-footer"><section id="comments"><script src="https://utteranc.es/client.js" repo="smallnest/gitalk" issue-term="title" theme="github-light" crossorigin="anonymous" async></script><noscript>为正常使用评论功能请激活JavaScript</noscript></section></footer></div><nav id="article-nav"><a href="/2015/02/26/simple-scala-akka-actor-examples/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">一个超简单的akka actor例子</div></a> <a href="/2015/01/23/run-spark-on-yarn/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">在YARN上运行Spark</div></a></nav></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">微信公众号</h3><div class="widget"><img width="100%" src="/images/widgets/gopatterns.jpg"></div></div><div class="widget-wrap"><h3 class="widget-title">极客时间专栏</h3><div class="widget"><a href="https://time.geekbang.org/column/intro/100061801"><img width="100%" src="/images/widgets/geekbang.png"></a></div></div><div class="widget-wrap"><h3 class="widget-title">原创图书</h3><div class="widget"><a href="/ScalaCollectionsCookbook/"><img width="100%" src="/ScalaCollectionsCookbook/scala_collections_cookbook.jpg"> <img width="100%" src="/ScalaCollectionsCookbook/scala_collections_cookbook_tw.png"></a></div></div><div class="widget-wrap"><h3 class="widget-title">分类</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DOTNET/">DOTNET</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">185</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">64</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Rust/">Rust</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Scala/">Scala</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/分享/">分享</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端开发/">前端开发</a><span class="category-list-count">18</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/区块链/">区块链</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/大数据/">大数据</a><span class="category-list-count">60</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><span class="category-list-count">28</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/架构/">架构</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/管理/">管理</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络编程/">网络编程</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书笔记/">读书笔记</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维/">运维</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/高并发编程/">高并发编程</a><span class="category-list-count">20</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">标签云</h3><div class="widget tagcloud"><a href="/tags/Android/" style="font-size: 15.71px">Android</a><a href="/tags/ApacheBench/" style="font-size: 11.43px">ApacheBench</a><a href="/tags/Bower/" style="font-size: 10.00px">Bower</a><a href="/tags/C/" style="font-size: 10.00px">C#</a><a href="/tags/CDN/" style="font-size: 10.00px">CDN</a><a href="/tags/CQRS/" style="font-size: 10.00px">CQRS</a><a href="/tags/CRC/" style="font-size: 10.00px">CRC</a><a href="/tags/CSS/" style="font-size: 11.43px">CSS</a><a href="/tags/CompletableFuture/" style="font-size: 10.00px">CompletableFuture</a><a href="/tags/Comsat/" style="font-size: 10.00px">Comsat</a><a href="/tags/Curator/" style="font-size: 18.57px">Curator</a><a href="/tags/DSL/" style="font-size: 10.00px">DSL</a><a href="/tags/Disruptor/" style="font-size: 10.00px">Disruptor</a><a href="/tags/Docker/" style="font-size: 11.43px">Docker</a><a href="/tags/Ember/" style="font-size: 11.43px">Ember</a><a href="/tags/FastJson/" style="font-size: 10.00px">FastJson</a><a href="/tags/Fiber/" style="font-size: 10.00px">Fiber</a><a href="/tags/GAE/" style="font-size: 10.00px">GAE</a><a href="/tags/GC/" style="font-size: 12.86px">GC</a><a href="/tags/Gnuplot/" style="font-size: 10.00px">Gnuplot</a><a href="/tags/Go/" style="font-size: 14.29px">Go</a><a href="/tags/Gradle/" style="font-size: 10.00px">Gradle</a><a href="/tags/Grunt/" style="font-size: 10.00px">Grunt</a><a href="/tags/Gulp/" style="font-size: 10.00px">Gulp</a><a href="/tags/Hadoop/" style="font-size: 10.00px">Hadoop</a><a href="/tags/Hazelcast/" style="font-size: 10.00px">Hazelcast</a><a href="/tags/IPFS/" style="font-size: 10.00px">IPFS</a><a href="/tags/Ignite/" style="font-size: 10.00px">Ignite</a><a href="/tags/JVM/" style="font-size: 10.00px">JVM</a><a href="/tags/Java/" style="font-size: 17.14px">Java</a><a href="/tags/Kafka/" style="font-size: 20.00px">Kafka</a><a href="/tags/Lambda/" style="font-size: 14.29px">Lambda</a><a href="/tags/Linux/" style="font-size: 12.86px">Linux</a><a href="/tags/LongAdder/" style="font-size: 10.00px">LongAdder</a><a href="/tags/MathJax/" style="font-size: 10.00px">MathJax</a><a href="/tags/Maven/" style="font-size: 11.43px">Maven</a><a href="/tags/Memcached/" style="font-size: 10.00px">Memcached</a><a href="/tags/Metrics/" style="font-size: 10.00px">Metrics</a><a href="/tags/Mongo/" style="font-size: 12.86px">Mongo</a><a href="/tags/Netty/" style="font-size: 15.71px">Netty</a></div></div><div class="widget-wrap"><h3 class="widget-title">归档</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">28</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">28</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">近期文章</h3><div class="widget"><ul><li><a href="/2022/01/27/pyroscope-a-continuous-profiling-platform/">pyroscope: 一个简单易用的持续剖析平台</a></li><li><a href="/2022/01/16/three-new-concepts-of-go-interface-since-1-18/">面试官提问三个Go接口的概念， 10年gopher竟无言以对</a></li><li><a href="/2022/01/15/Writing-maintainable-Go-code/">编写可维护的Go代码</a></li><li><a href="/2022/01/11/go-generic-supports-specialization-no/">Go泛型编程: 支持特例化?</a></li><li><a href="/2022/01/08/the-interface-is-not-that-interface-in-go-1-18/">Go泛型编程: interface 不再是那个interface</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">友情链接</h3><div class="widget"><ul><li><a href="http://stackshare.io" target="_blank">技术栈</a></li><li>&nbsp;</li><li><a href="https://toutiao.io/" target="_blank">开发者头条</a></li><li><a href="http://weekly.manong.io/issues/" target="_blank">码农周刊</a></li><li><a href="http://www.tuicool.com/mags" target="_blank">编程狂人周刊</a></li><li><a href="http://www.importnew.com/" target="_blank">importnew</a></li><li><a href="http://ifeve.com/" target="_blank">并发编程网</a></li><li>&nbsp;</li><li><a href="http://github.com" target="_blank">github</a></li><li><a href="http://stackoverflow.com/" target="_blank">stackoverflow</a></li><li><a href="http://www.javacodegeeks.com/" target="_blank">javacodegeeks</a></li><li><a href="http://www.infoq.com/" target="_blank">infoq</a></li><li><a href="http://www.dzone.com/links/index.html" target="_blank">dzone</a></li><li><a href="https://oj.leetcode.com/problems/" target="_blank">leetcode</a></li><li><a href="http://tutorials.jenkov.com" target="_blank">jenkov</a></li><li><a href="https://howtodoinjava.com" target="_blank">HowToDoInJava</a></li><li><a href="https://java-design-patterns.com/patterns/" target="_blank">java design patterns</a></li><li>&nbsp;</li><li><a href="https://medium.com/netflix-techblog" target="_blank">Netflix技术博客</a></li><li><a href="https://www.techiedelight.com" target="_blank">Techie Delight</a></li><li><a href="https://engineering.linkedin.com/blog" target="_blank">Linkedin技术博客</a></li><li><a href="https://blogs.dropbox.com/tech/" target="_blank">Dropbox技术博客</a></li><li><a href="https://code.fb.com" target="_blank">Facebook技术博客</a></li><li><a href="http://jm.taobao.org" target="_blank">淘宝中间件团队</a></li><li><a href="https://tech.meituan.com" target="_blank">美团技术博客</a></li><li><a href="http://blogs.360.cn" target="_blank">360技术博客</a></li><li><a href="https://xiaomi-info.github.io" target="_blank">小米信息部技术团队</a></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2022 smallnest<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></div></div></footer></div><nav id="mobile-nav"><a href="/" class="mobile-nav-link"><i class="fa fa-home">&nbsp;</i>首页</a> <a href="/archives" class="mobile-nav-link"><i class="fa fa-folder-o">&nbsp;</i>归档</a> <a href="https://github.com/smallnest" class="mobile-nav-link"><i class="fa fa-github">&nbsp;</i>github</a> <a class="mobile-nav-link" href="#"><i class="fa fa-bars">&nbsp;</i>网站群</a> <a class="mobile-nav-link" href="/goasm">&nbsp;&nbsp;<i class="fa fa-language">&nbsp;</i>Go汇编示例</a> <a class="mobile-nav-link" href="https://gowebexamples.com">&nbsp;&nbsp;<i class="fa fa-external-link">&nbsp;</i>Go Web开发示例</a> <a class="mobile-nav-link" href="http://go-database-sql.org">&nbsp;&nbsp;<i class="fa fa-external-link">&nbsp;</i>Go 数据库开发教程</a> <a class="mobile-nav-link" href="http://rpcx.io">&nbsp;&nbsp;<i class="fa undefined">&nbsp;</i>RPCX官网</a> <a class="mobile-nav-link" href="http://cn.doc.rpcx.io">&nbsp;&nbsp;<i class="fa undefined">&nbsp;</i>RPC开发指南</a> <a href="/ScalaCollectionsCookbook" class="mobile-nav-link"><i class="fa fa-book">&nbsp;</i>Scala集合技术手册</a> <a href="/about" class="mobile-nav-link"><i class="fa fa-lemon-o">&nbsp;</i>关于</a></nav><script src="//cdn.staticfile.org/jquery/1.11.1/jquery.min.js"></script><script src="//cdn.bootcss.com/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js"></script><script src="/js/script.js" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],processEscapes:!0,skipTags:["script","noscript","style","textarea","pre","code"]}}),MathJax.Hub.Queue(function(){var a,e=MathJax.Hub.getAllJax();for(a=0;a<e.length;a+=1)e[a].SourceElement().parentNode.className+=" has-jax"});</script><script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.6.0-beta.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><div id="totop" style="position:fixed;bottom:150px;right:10px;cursor: pointer;z-index: 2000"><a title="返回顶部"><img src="/images/scrollup.png"></a></div><script src="/js/totop.js" type="text/javascript"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?e085d87993250aab11f3e0c15f1c2785";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script></div></body></html>