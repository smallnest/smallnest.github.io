<!doctype html>
<html>
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="generator" content="pandoc">
      
      
      
      <!-- Bootstrap -->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
      <!-- Font-awesome -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <!-- Styles -->
      <link rel="stylesheet" href="https://ashki23.github.io/styles.css">
         </head>
   <body>
            <div class="container">
         
         <h2 id="第一章rust-并发基础"><a
href="./1_Basic_of_Rust_Concurrency.html">第一章：Rust 并发基础</a></h2>
<ul>
<li><a href="./1_Basic_of_Rust_Concurrency.html#rust-中的线程">Rust
中的线程</a></li>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#作用域内的线程">作用域内的线程</a></li>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#共享所有权以及引用计数">共享所有权以及引用计数</a>
<ul>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#静态值static">静态值（static）</a></li>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#泄漏leak">泄漏（Leak）</a></li>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#引用计数">引用计数</a></li>
</ul></li>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#借用和数据竞争">借用和数据竞争</a></li>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#内部可变性">内部可变性</a>（<a
href="./1_Basic_of_Rust_Concurrency.html#cell">Cell</a>、<a
href="./1_Basic_of_Rust_Concurrency.html#refcell">RefCell</a>、<a
href="./1_Basic_of_Rust_Concurrency.html#互斥锁和读写锁">互斥锁以及读写锁</a>、<a
href="./1_Basic_of_Rust_Concurrency.html#atomic">Atomic</a>、<a
href="./1_Basic_of_Rust_Concurrency.html#unsafecell">UnsafeCell</a>）</li>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#线程安全send-和-sync">线程安全：Send
和 Sync</a></li>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#锁互斥锁和读写锁">锁：互斥锁和读写锁</a>
<ul>
<li><a href="./1_Basic_of_Rust_Concurrency.html#rust-的互斥锁">Rust
的互斥锁</a></li>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#锁中毒poison">锁中毒</a></li>
<li><a href="./1_Basic_of_Rust_Concurrency.html#读写锁">读写锁</a></li>
</ul></li>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#等待-阻塞park和条件变量">等待：阻塞和条件变量</a>
<ul>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#线程阻塞">线程阻塞</a></li>
<li><a
href="./1_Basic_of_Rust_Concurrency.html#条件变量">条件变量</a></li>
</ul></li>
<li><a href="./1_Basic_of_Rust_Concurrency.html#总结">总结</a></li>
</ul>
<h2 id="第二章atomic"><a href="./2_Atomics.html">第二章：Atomic</a></h2>
<ul>
<li><a href="./2_Atomics.html#atomic-的加载和存储操作">Atomic
的加载和存储操作</a>
<ul>
<li><a href="./2_Atomics.html#示例停止标识">示例：停止标识</a></li>
<li><a href="./2_Atomics.html#示例进度报道">示例：进度报道</a>
<ul>
<li><a href="./2_Atomics.html#同步">同步</a></li>
</ul></li>
<li><a href="./2_Atomics.html#示例惰性初始化">示例：惰性初始化</a></li>
</ul></li>
<li><a href="./2_Atomics.html#获取并修改操作">获取并修改操作</a>
<ul>
<li><a
href="./2_Atomics.html#示例来自多线程的进度报道">示例：来自多线程的进度报道</a></li>
<li><a href="./2_Atomics.html#示例统计数据">示例：统计数据</a></li>
<li><a href="./2_Atomics.html#示例id-分配">示例：ID 分配</a></li>
</ul></li>
<li><a href="./2_Atomics.html#比较并交换操作">比较并交互操作</a>
<ul>
<li><a href="./2_Atomics.html#示例没有溢出的-id-分配">示例：没有溢出的
ID 分配</a></li>
<li><a
href="./2_Atomics.html#示例惰性一次性初始化">示例：惰性一次性初始化</a></li>
</ul></li>
<li><a href="./2_Atomics.html#总结">总结</a></li>
</ul>
<h2 id="第三章内存排序"><a
href="./3_Memory_Ordering.html">第三章：内存排序</a></h2>
<ul>
<li><a href="./3_Memory_Ordering.html#重排和优化">重排和优化</a></li>
<li><a href="./3_Memory_Ordering.html#内存模型">内存模型</a></li>
<li><a
href="./3_Memory_Ordering.html#happens-before-关系">Happens-Before
关系</a>
<ul>
<li><a href="./3_Memory_Ordering.html#spawn-和-join">spawn 和
join</a></li>
</ul></li>
<li><a href="./3_Memory_Ordering.html#relaxed-排序">Relaxed
排序</a></li>
<li><a href="./3_Memory_Ordering.html#release-和-acquire-排序">Release
和 Acquire 排序</a>
<ul>
<li><a href="./3_Memory_Ordering.html#示例锁定">示例：锁定</a></li>
<li><a
href="./3_Memory_Ordering.html#示例使用间接的方式惰性初始化">示例：使用间接的方式惰性初始化</a></li>
</ul></li>
<li><a href="./3_Memory_Ordering.html#consume-排序">Consume
排序</a></li>
<li><a
href="./3_Memory_Ordering.html#顺序一致性排序">顺序一致性排序</a></li>
<li><a href="./3_Memory_Ordering.html#屏障fence2">屏障（Fence）</a></li>
<li><a href="./3_Memory_Ordering.html#常见的误解">常见的误解</a></li>
<li><a href="./3_Memory_Ordering.html#总结">总结</a></li>
</ul>
<h2 id="第四章构建我们自己的自旋锁"><a
href="./4_Building_Our_Own_Spin_Lock.html">第四章：构建我们自己的自旋锁</a></h2>
<ul>
<li><a
href="./4_Building_Our_Own_Spin_Lock.html#一个最小实现">一个最小实现</a></li>
<li><a
href="./4_Building_Our_Own_Spin_Lock.html#一个不安全的自旋锁">一个不安全的自旋锁</a></li>
<li><a
href="./4_Building_Our_Own_Spin_Lock.html#使用锁守卫的安全接口">使用锁守卫的安全接口</a></li>
<li><a href="./4_Building_Our_Own_Spin_Lock.html#总结">总结</a></li>
</ul>
<h2 id="第五章构建我们自己的-channel"><a
href="./5_Building_Our_Own_Channels.html">第五章：构建我们自己的
Channel</a></h2>
<ul>
<li><a
href="./5_Building_Our_Own_Channels.html#一个简单的以-mutex-为基础的-channel">一个简单的以
mutex 为基础的 Channel</a></li>
<li><a
href="./5_Building_Our_Own_Channels.html#一个不安全的一次性-channel">一个不安全的一次性
Channel</a></li>
<li><a
href="./5_Building_Our_Own_Channels.html#通过运行时检查来达到安全">通过运行时检查来达到安全</a></li>
<li><a
href="./5_Building_Our_Own_Channels.html#通过类型来达到安全">通过类型来达到安全</a></li>
<li><a
href="./5_Building_Our_Own_Channels.html#借用以避免内存分配">借用以避免内存分配</a></li>
<li><a href="./5_Building_Our_Own_Channels.html#阻塞">阻塞</a></li>
<li><a href="./5_Building_Our_Own_Channels.html#总结">总结</a></li>
</ul>
<h2 id="第六章构建我们自己的arc"><a
href="./6_Building_Our_Own_Arc.html">第六章：构建我们自己的“Arc”</a></h2>
<ul>
<li><a
href="./6_Building_Our_Own_Arc.html#基础的引用计数">基础的引用计数</a>
<ul>
<li><a href="./6_Building_Our_Own_Arc.html#测试它">测试它</a></li>
<li><a href="./6_Building_Our_Own_Arc.html#可变性">可变性</a></li>
</ul></li>
<li><a href="./6_Building_Our_Own_Arc.html#weak-指针">Weak 指针</a>
<ul>
<li><a href="./6_Building_Our_Own_Arc.html#测试它2">测试它</a></li>
<li><a href="./6_Building_Our_Own_Arc.html#优化">优化</a></li>
</ul></li>
<li><a href="./6_Building_Our_Own_Arc.html#总结">总结</a></li>
</ul>
<h2 id="第七章理解处理器"><a
href="./7_Understanding_the_Processor.html">第七章：理解处理器</a></h2>
<ul>
<li><a
href="./7_Understanding_the_Processor.html#处理器指令">处理器指令</a>
<ul>
<li><a
href="./7_Understanding_the_Processor.html#加载和存储操作">加载和存储操作</a></li>
<li><a
href="./7_Understanding_the_Processor.html#读并修改并写操作">读并修改并写操作</a>
<ul>
<li><a href="./7_Understanding_the_Processor.html#x86-lock-前缀">x86
lock 前缀</a></li>
<li><a
href="./7_Understanding_the_Processor.html#x86-比较并交换指令">x86
比较并交换指令</a></li>
</ul></li>
<li><a
href="./7_Understanding_the_Processor.html#ll-和-sc-指令">ll-和-sc-指令</a>
<ul>
<li><a
href="./7_Understanding_the_Processor.html#arm-的-ldxr-和-stxr-指令">arm-的-ldxr-和-stxr-指令</a></li>
<li><a
href="./7_Understanding_the_Processor.html#arm-的比较并交换操作">arm-的比较并交换操作</a></li>
</ul></li>
</ul></li>
<li><a href="./7_Understanding_the_Processor.html#缓存3">缓存</a>
<ul>
<li><a
href="./7_Understanding_the_Processor.html#缓存一致性">缓存一致性</a>
<ul>
<li><a
href="./7_Understanding_the_Processor.html#write-through-协议">write-through
协议</a></li>
<li><a href="./7_Understanding_the_Processor.html#mesi-协议4">MESI
协议</a></li>
</ul></li>
<li><a
href="./7_Understanding_the_Processor.html#对性能的影响">对性能的影响</a></li>
</ul></li>
<li><a href="./7_Understanding_the_Processor.html#重排">重排</a></li>
<li><a href="./7_Understanding_the_Processor.html#内存排序">内存排序</a>
<ul>
<li><a
href="./7_Understanding_the_Processor.html#x86-64强排序">x86-64：强排序</a></li>
<li><a
href="./7_Understanding_the_Processor.html#arm64弱排序">ARM64：弱排序</a></li>
<li><a
href="./7_Understanding_the_Processor.html#一个实验">一个实验</a></li>
<li><a
href="./7_Understanding_the_Processor.html#内存屏障">内存屏障</a></li>
</ul></li>
<li><a href="./7_Understanding_the_Processor.html#总结">总结</a></li>
</ul>
<h2 id="第八章操作系统原语"><a
href="./8_Operating_System_Primitives.html">第八章：操作系统原语</a></h2>
<ul>
<li><a
href="./8_Operating_System_Primitives.html#使用内核接口">使用内核接口</a></li>
<li><a href="./8_Operating_System_Primitives.html#posix">POSIX</a>
<ul>
<li><a href="./8_Operating_System_Primitives.html#在-rust-中包装类型">在
Rust 中包装类型</a></li>
</ul></li>
<li><a href="./8_Operating_System_Primitives.html#linux">Linux</a>
<ul>
<li><a href="./8_Operating_System_Primitives.html#futex">Futex</a></li>
<li><a href="./8_Operating_System_Primitives.html#futex-操作">Futex
操作</a></li>
<li><a
href="./8_Operating_System_Primitives.html#优先继承-futex-操作">优先继承
Futex 操作</a></li>
</ul></li>
<li><a href="./8_Operating_System_Primitives.html#macos">macOS</a>
<ul>
<li><a
href="./8_Operating_System_Primitives.html#os_unfair_lock">os_unfair_lock</a></li>
</ul></li>
<li><a href="./8_Operating_System_Primitives.html#windows">Windows</a>
<ul>
<li><a
href="./8_Operating_System_Primitives.html#重量级内核对象">重量级内核对象</a></li>
<li><a
href="./8_Operating_System_Primitives.html#轻量级对象">轻量级对象</a>
<ul>
<li><a
href="./8_Operating_System_Primitives.html#精简的读写srw锁5">精简的读写锁（SRW）</a></li>
</ul></li>
<li><a
href="./8_Operating_System_Primitives.html#基于地址的等待">基于地址的等待</a></li>
</ul></li>
<li><a href="./8_Operating_System_Primitives.html#总结">总结</a></li>
</ul>
<h2 id="第九章构建我们自己的锁"><a
href="./9_Building_Our_Own_Locks.html">第九章：构建我们自己的「锁」</a></h2>
<ul>
<li><a href="./9_Building_Our_Own_Locks.html#mutex">Mutex</a>
<ul>
<li><a
href="./9_Building_Our_Own_Locks.html#避免系统调用">避免系统调用</a></li>
<li><a
href="./9_Building_Our_Own_Locks.html#进一步优化">进一步优化</a></li>
<li><a href="./9_Building_Our_Own_Locks.html#基准测试">基准测试</a></li>
</ul></li>
<li><a href="./9_Building_Our_Own_Locks.html#条件变量">条件变量</a>
<ul>
<li><a
href="./9_Building_Our_Own_Locks.html#避免系统调用2">避免系统调用2</a></li>
<li><a
href="./9_Building_Our_Own_Locks.html#避免虚假唤醒">避免虚假唤醒</a></li>
</ul></li>
<li><a href="./9_Building_Our_Own_Locks.html#读写锁">读写锁</a>
<ul>
<li><a href="./9_Building_Our_Own_Locks.html#避免-writer-忙碌循环">避免
writer 忙碌循环</a></li>
<li><a href="./9_Building_Our_Own_Locks.html#避免-writer-陷入饥饿">避免
writer 陷入饥饿</a></li>
</ul></li>
<li><a href="./9_Building_Our_Own_Locks.html#总结">总结</a></li>
</ul>
<h2 id="第十章理念和灵感"><a
href="./10_Ideas_and_Inspiration.html">第十章：理念和灵感</a></h2>
<ul>
<li><a href="./10_Ideas_and_Inspiration.html#信号">信号量</a></li>
<li><a href="./10_Ideas_and_Inspiration.html#rcu">RCU</a></li>
<li><a href="./10_Ideas_and_Inspiration.html#无锁链表">无锁链表</a></li>
<li><a
href="./10_Ideas_and_Inspiration.html#基于队列的锁">基于队列的锁</a></li>
<li><a
href="./10_Ideas_and_Inspiration.html#基于阻塞的锁">基于阻塞的锁</a></li>
<li><a
href="./10_Ideas_and_Inspiration.html#顺序锁sequence-lock">顺序锁</a></li>
<li><a href="./10_Ideas_and_Inspiration.html#教学材料">教学材料</a></li>
</ul>
<h2 id="索引"><a href="./attachment.html">索引</a></h2>
<p>注明：本文译自 <a href="https://marabos.nl/atomics/"
class="uri">https://marabos.nl/atomics/</a>，若其它平台引用此翻译，也请注明出处。</p>
<p>加入我们，编写<a
href="https://github.com/rustcc/Rust_Atomics_and_Locks/blob/main/attachment.html#索引">索引</a>或者进行<a
href="https://github.com/rustcc/Rust_Atomics_and_Locks/issues/28">校对</a>以帮助更多的人</p>      </div>
            <!-- JS, Popper.js, and jQuery -->
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
      <!-- Mathjax -->
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script>
         /* Bootstrap styles to tables */
         function bootstrapStylePandocTables() {
         $('tr.header').parent('thead').parent('table').addClass('table table-condensed'); }
         $(document).ready(function () { bootstrapStylePandocTables(); });
         /* Adjust the height when click the toc */
         var shiftWindow = function() { scrollBy(0, -60) };
         window.addEventListener("hashchange", shiftWindow);
         function load() { if (window.location.hash) shiftWindow(); }
      </script>
   </body>
</html>
