<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title> æµ‹è¯• - ç®€å•è‹±è¯­å­¦Rust</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="Chapter_0.html"><strong aria-hidden="true">1.</strong>  æ›´æ–°</a></li><li class="chapter-item expanded "><a href="Chapter_1.html"><strong aria-hidden="true">2.</strong>  ä»‹ç»</a></li><li class="chapter-item expanded "><a href="Chapter_2.html"><strong aria-hidden="true">3.</strong>  æˆ‘æ˜¯è°ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="Chapter_3.html"><strong aria-hidden="true">4.</strong>  ç®€å•è‹±è¯­å­¦Rust</a></li><li class="chapter-item expanded "><a href="Chapter_4.html"><strong aria-hidden="true">5.</strong>  Rust Playground</a></li><li class="chapter-item expanded "><a href="Chapter_5.html"><strong aria-hidden="true">6.</strong>  ğŸš§å’Œâš ï¸</a></li><li class="chapter-item expanded "><a href="Chapter_6.html"><strong aria-hidden="true">7.</strong>  æ³¨é‡Š</a></li><li class="chapter-item expanded "><a href="Chapter_7.html"><strong aria-hidden="true">8.</strong>  ç±»å‹</a></li><li class="chapter-item expanded "><a href="Chapter_8.html"><strong aria-hidden="true">9.</strong>  ç±»å‹æ¨å¯¼</a></li><li class="chapter-item expanded "><a href="Chapter_9.html"><strong aria-hidden="true">10.</strong>  æ‰“å°hello, world!</a></li><li class="chapter-item expanded "><a href="Chapter_10.html"><strong aria-hidden="true">11.</strong>  æ˜¾ç¤ºå’Œè°ƒè¯•</a></li><li class="chapter-item expanded "><a href="Chapter_11.html"><strong aria-hidden="true">12.</strong>  å¯å˜æ€§</a></li><li class="chapter-item expanded "><a href="Chapter_12.html"><strong aria-hidden="true">13.</strong>  æ ˆã€å †å’ŒæŒ‡é’ˆ</a></li><li class="chapter-item expanded "><a href="Chapter_13.html"><strong aria-hidden="true">14.</strong>  å…³äºæ‰“å°çš„æ›´å¤šä¿¡æ¯</a></li><li class="chapter-item expanded "><a href="Chapter_14.html"><strong aria-hidden="true">15.</strong>  å­—ç¬¦ä¸²</a></li><li class="chapter-item expanded "><a href="Chapter_15.html"><strong aria-hidden="true">16.</strong>  constå’Œstatic</a></li><li class="chapter-item expanded "><a href="Chapter_16.html"><strong aria-hidden="true">17.</strong>  å…³äºå¼•ç”¨çš„æ›´å¤šä¿¡æ¯</a></li><li class="chapter-item expanded "><a href="Chapter_17.html"><strong aria-hidden="true">18.</strong>  å¯å˜å¼•ç”¨</a></li><li class="chapter-item expanded "><a href="Chapter_18.html"><strong aria-hidden="true">19.</strong>  å‡½æ•°çš„å¼•ç”¨</a></li><li class="chapter-item expanded "><a href="Chapter_19.html"><strong aria-hidden="true">20.</strong>  æ‹·è´ç±»å‹</a></li><li class="chapter-item expanded "><a href="Chapter_20.html"><strong aria-hidden="true">21.</strong>  é›†åˆç±»å‹</a></li><li class="chapter-item expanded "><a href="Chapter_21.html"><strong aria-hidden="true">22.</strong>  å‘é‡</a></li><li class="chapter-item expanded "><a href="Chapter_22.html"><strong aria-hidden="true">23.</strong>  å…ƒç»„</a></li><li class="chapter-item expanded "><a href="Chapter_23.html"><strong aria-hidden="true">24.</strong>  æ§åˆ¶æµ</a></li><li class="chapter-item expanded "><a href="Chapter_24.html"><strong aria-hidden="true">25.</strong>  ç»“æ„ä½“</a></li><li class="chapter-item expanded "><a href="Chapter_25.html"><strong aria-hidden="true">26.</strong>  æšä¸¾</a></li><li class="chapter-item expanded "><a href="Chapter_26.html"><strong aria-hidden="true">27.</strong>  å¾ªç¯</a></li><li class="chapter-item expanded "><a href="Chapter_27.html"><strong aria-hidden="true">28.</strong>  å®ç°ç»“æ„ä½“å’Œæšä¸¾</a></li><li class="chapter-item expanded "><a href="Chapter_28.html"><strong aria-hidden="true">29.</strong>  è§£æ„</a></li><li class="chapter-item expanded "><a href="Chapter_29.html"><strong aria-hidden="true">30.</strong>  å¼•ç”¨å’Œç‚¹è¿ç®—ç¬¦</a></li><li class="chapter-item expanded "><a href="Chapter_30.html"><strong aria-hidden="true">31.</strong>  æ³›å‹</a></li><li class="chapter-item expanded "><a href="Chapter_31.html"><strong aria-hidden="true">32.</strong>  Optionå’ŒResult</a></li><li class="chapter-item expanded "><a href="Chapter_32.html"><strong aria-hidden="true">33.</strong>  å…¶ä»–é›†åˆç±»å‹</a></li><li class="chapter-item expanded "><a href="Chapter_33.html"><strong aria-hidden="true">34.</strong>  ?æ“ä½œç¬¦</a></li><li class="chapter-item expanded "><a href="Chapter_34.html"><strong aria-hidden="true">35.</strong>  ç‰¹æ€§</a></li><li class="chapter-item expanded "><a href="Chapter_35.html"><strong aria-hidden="true">36.</strong>  é“¾å¼æ–¹æ³•</a></li><li class="chapter-item expanded "><a href="Chapter_36.html"><strong aria-hidden="true">37.</strong>  è¿­ä»£å™¨</a></li><li class="chapter-item expanded "><a href="Chapter_37.html"><strong aria-hidden="true">38.</strong>  é—­åŒ…</a></li><li class="chapter-item expanded "><a href="Chapter_38.html"><strong aria-hidden="true">39.</strong>  dbg! å®å’Œ.inspect</a></li><li class="chapter-item expanded "><a href="Chapter_39.html"><strong aria-hidden="true">40.</strong>  &strçš„ç±»å‹</a></li><li class="chapter-item expanded "><a href="Chapter_40.html"><strong aria-hidden="true">41.</strong>  ç”Ÿå‘½æœŸ</a></li><li class="chapter-item expanded "><a href="Chapter_41.html"><strong aria-hidden="true">42.</strong>  å†…éƒ¨å¯å˜æ€§</a></li><li class="chapter-item expanded "><a href="Chapter_42.html"><strong aria-hidden="true">43.</strong>  Cow</a></li><li class="chapter-item expanded "><a href="Chapter_43.html"><strong aria-hidden="true">44.</strong>  ç±»å‹åˆ«å</a></li><li class="chapter-item expanded "><a href="Chapter_44.html"><strong aria-hidden="true">45.</strong>  todo!å®</a></li><li class="chapter-item expanded "><a href="Chapter_45.html"><strong aria-hidden="true">46.</strong>  Rc</a></li><li class="chapter-item expanded "><a href="Chapter_46.html"><strong aria-hidden="true">47.</strong>  å¤šçº¿ç¨‹</a></li><li class="chapter-item expanded "><a href="Chapter_47.html"><strong aria-hidden="true">48.</strong>  å‡½æ•°ä¸­çš„é—­åŒ…</a></li><li class="chapter-item expanded "><a href="Chapter_48.html"><strong aria-hidden="true">49.</strong>  impl Trait</a></li><li class="chapter-item expanded "><a href="Chapter_49.html"><strong aria-hidden="true">50.</strong>  Arc</a></li><li class="chapter-item expanded "><a href="Chapter_50.html"><strong aria-hidden="true">51.</strong>  Channels</a></li><li class="chapter-item expanded "><a href="Chapter_51.html"><strong aria-hidden="true">52.</strong>  é˜…è¯»Rustæ–‡æ¡£</a></li><li class="chapter-item expanded "><a href="Chapter_52.html"><strong aria-hidden="true">53.</strong>  å±æ€§</a></li><li class="chapter-item expanded "><a href="Chapter_53.html"><strong aria-hidden="true">54.</strong>  Box</a></li><li class="chapter-item expanded "><a href="Chapter_54.html"><strong aria-hidden="true">55.</strong>  ç”¨BoxåŒ…è£¹trait</a></li><li class="chapter-item expanded "><a href="Chapter_55.html"><strong aria-hidden="true">56.</strong>  é»˜è®¤å€¼å’Œå»ºé€ è€…æ¨¡å¼</a></li><li class="chapter-item expanded "><a href="Chapter_56.html"><strong aria-hidden="true">57.</strong>  Derefå’ŒDerefMut</a></li><li class="chapter-item expanded "><a href="Chapter_57.html"><strong aria-hidden="true">58.</strong>  Crateå’Œæ¨¡å—</a></li><li class="chapter-item expanded "><a href="Chapter_58.html" class="active"><strong aria-hidden="true">59.</strong>  æµ‹è¯•</a></li><li class="chapter-item expanded "><a href="Chapter_59.html"><strong aria-hidden="true">60.</strong>  å¤–éƒ¨crate</a></li><li class="chapter-item expanded "><a href="Chapter_60.html"><strong aria-hidden="true">61.</strong>  æ ‡å‡†åº“ä¹‹æ—…</a></li><li class="chapter-item expanded "><a href="Chapter_61.html"><strong aria-hidden="true">62.</strong>  ç¼–å†™å®</a></li><li class="chapter-item expanded "><a href="Chapter_62.html"><strong aria-hidden="true">63.</strong>  cargo</a></li><li class="chapter-item expanded "><a href="Chapter_63.html"><strong aria-hidden="true">64.</strong>  æ¥å—ç”¨æˆ·è¾“å…¥</a></li><li class="chapter-item expanded "><a href="Chapter_64.html"><strong aria-hidden="true">65.</strong>  ä½¿ç”¨æ–‡ä»¶</a></li><li class="chapter-item expanded "><a href="Chapter_65.html"><strong aria-hidden="true">66.</strong>  cargoæ–‡æ¡£</a></li><li class="chapter-item expanded "><a href="Chapter_66.html"><strong aria-hidden="true">67.</strong>  ç»“æŸäº†å—ï¼Ÿ</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ç®€å•è‹±è¯­å­¦Rust</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="æµ‹è¯•"><a class="header" href="#æµ‹è¯•">æµ‹è¯•</a></h2>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†æ¨¡å—,å°±å¯ä»¥è°ˆè°ˆæµ‹è¯•äº†ã€‚åœ¨Rustä¸­æµ‹è¯•ä½ çš„ä»£ç æ˜¯éå¸¸å®¹æ˜“çš„ï¼Œå› ä¸ºä½ å¯ä»¥åœ¨ä½ çš„ä»£ç æ—è¾¹å†™æµ‹è¯•ã€‚</p>
<p>å¼€å§‹æµ‹è¯•çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°ä¸Šé¢æ·»åŠ <code>#[test]</code>ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[test]
fn two_is_two() {
    assert_eq!(2, 2);
}
<span class="boring">}</span></code></pre></pre>
<p>ä½†å¦‚æœä½ è¯•å›¾åœ¨playgroundä¸­è¿è¡Œå®ƒï¼Œå®ƒç»™å‡ºäº†ä¸€ä¸ªé”™è¯¯ã€‚<code>error[E0601]: `main` function not found in crate `playground</code>. è¿™æ˜¯å› ä¸ºä½ ä¸ä½¿ç”¨ <em>Run</em> æ¥è¿›è¡Œæµ‹è¯•ï¼Œä½ ä½¿ç”¨ <em>Test</em> ã€‚å¦å¤–ï¼Œä½ ä¸ä½¿ç”¨ <code>main()</code> å‡½æ•°è¿›è¡Œæµ‹è¯• - å®ƒä»¬åœ¨å¤–é¢è¿è¡Œã€‚è¦åœ¨Playgroundä¸­è¿è¡Œè¿™ä¸ªï¼Œç‚¹å‡» <em>RUN</em> æ—è¾¹çš„<code>Â·Â·Â·</code>ï¼Œç„¶åæŠŠå®ƒæ”¹ä¸º <em>Test</em> ã€‚ç°åœ¨å¦‚æœä½ ç‚¹å‡»å®ƒï¼Œå®ƒå°†è¿è¡Œæµ‹è¯•ã€‚(å¦‚æœä½ å·²ç»å®‰è£…äº† Rustï¼Œä½ å°†è¾“å…¥ <code>cargo test</code> æ¥åšè¿™ä¸ªæµ‹è¯•)</p>
<p>è¿™é‡Œæ˜¯è¾“å‡º:</p>
<pre><code class="language-text">running 1 test
test two_is_two ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out
</code></pre>
<p>è®©æˆ‘ä»¬æŠŠ<code>assert_eq!(2, 2)</code>æ”¹æˆ<code>assert_eq!(2, 3)</code>ï¼Œçœ‹çœ‹ä¼šæœ‰ä»€ä¹ˆç»“æœã€‚å½“æµ‹è¯•å¤±è´¥æ—¶ï¼Œä½ ä¼šå¾—åˆ°æ›´å¤šçš„ä¿¡æ¯ã€‚</p>
<pre><code class="language-text">running 1 test
test two_is_two ... FAILED

failures:

---- two_is_two stdout ----
thread 'two_is_two' panicked at 'assertion failed: `(left == right)`
  left: `2`,
 right: `3`', src/lib.rs:3:5
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace


failures:
    two_is_two

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out
</code></pre>
<p><code>assert_eq!(left, right)</code>æ˜¯Rustä¸­æµ‹è¯•ä¸€ä¸ªå‡½æ•°çš„ä¸»è¦æ–¹æ³•ã€‚å¦‚æœå®ƒä¸å·¥ä½œï¼Œå®ƒå°†æ˜¾ç¤ºä¸åŒçš„å€¼:å·¦è¾¹æœ‰2ï¼Œä½†å³è¾¹æœ‰3ã€‚</p>
<p><code>RUST_BACKTRACE=1</code>æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè¿™æ˜¯è®¡ç®—æœºä¸Šçš„ä¸€ä¸ªè®¾ç½®ï¼Œå¯ä»¥æä¾›æ›´å¤šå…³äºé”™è¯¯çš„ä¿¡æ¯ã€‚å¹¸å¥½playgroundä¹Ÿæœ‰:ç‚¹å‡»<code>STABLE</code>æ—è¾¹çš„<code>Â·Â·Â·</code>ï¼Œç„¶åè®¾ç½®å›æº¯ä¸º<code>ENABLED</code>ã€‚å¦‚æœä½ è¿™æ ·åšï¼Œå®ƒä¼šç»™ä½ <em>å¾ˆå¤š</em>çš„ä¿¡æ¯ã€‚</p>
<pre><code class="language-text">running 1 test
test two_is_two ... FAILED

failures:

---- two_is_two stdout ----
thread 'two_is_two' panicked at 'assertion failed: 2 == 3', src/lib.rs:3:5
stack backtrace:
   0: backtrace::backtrace::libunwind::trace
             at /cargo/registry/src/github.com-1ecc6299db9ec823/backtrace-0.3.46/src/backtrace/libunwind.rs:86
   1: backtrace::backtrace::trace_unsynchronized
             at /cargo/registry/src/github.com-1ecc6299db9ec823/backtrace-0.3.46/src/backtrace/mod.rs:66
   2: std::sys_common::backtrace::_print_fmt
             at src/libstd/sys_common/backtrace.rs:78
   3: &lt;std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display&gt;::fmt
             at src/libstd/sys_common/backtrace.rs:59
   4: core::fmt::write
             at src/libcore/fmt/mod.rs:1076
   5: std::io::Write::write_fmt
             at /rustc/c367798cfd3817ca6ae908ce675d1d99242af148/src/libstd/io/mod.rs:1537
   6: std::io::impls::&lt;impl std::io::Write for alloc::boxed::Box&lt;W&gt;&gt;::write_fmt
             at src/libstd/io/impls.rs:176
   7: std::sys_common::backtrace::_print
             at src/libstd/sys_common/backtrace.rs:62
   8: std::sys_common::backtrace::print
             at src/libstd/sys_common/backtrace.rs:49
   9: std::panicking::default_hook::{{closure}}
             at src/libstd/panicking.rs:198
  10: std::panicking::default_hook
             at src/libstd/panicking.rs:215
  11: std::panicking::rust_panic_with_hook
             at src/libstd/panicking.rs:486
  12: std::panicking::begin_panic
             at /rustc/c367798cfd3817ca6ae908ce675d1d99242af148/src/libstd/panicking.rs:410
  13: playground::two_is_two
             at src/lib.rs:3
  14: playground::two_is_two::{{closure}}
             at src/lib.rs:2
  15: core::ops::function::FnOnce::call_once
             at /rustc/c367798cfd3817ca6ae908ce675d1d99242af148/src/libcore/ops/function.rs:232
  16: &lt;alloc::boxed::Box&lt;F&gt; as core::ops::function::FnOnce&lt;A&gt;&gt;::call_once
             at /rustc/c367798cfd3817ca6ae908ce675d1d99242af148/src/liballoc/boxed.rs:1076
  17: &lt;std::panic::AssertUnwindSafe&lt;F&gt; as core::ops::function::FnOnce&lt;()&gt;&gt;::call_once
             at /rustc/c367798cfd3817ca6ae908ce675d1d99242af148/src/libstd/panic.rs:318
  18: std::panicking::try::do_call
             at /rustc/c367798cfd3817ca6ae908ce675d1d99242af148/src/libstd/panicking.rs:297
  19: std::panicking::try
             at /rustc/c367798cfd3817ca6ae908ce675d1d99242af148/src/libstd/panicking.rs:274
  20: std::panic::catch_unwind
             at /rustc/c367798cfd3817ca6ae908ce675d1d99242af148/src/libstd/panic.rs:394
  21: test::run_test_in_process
             at src/libtest/lib.rs:541
  22: test::run_test::run_test_inner::{{closure}}
             at src/libtest/lib.rs:450
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.


failures:
    two_is_two

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out
</code></pre>
<p>é™¤éä½ çœŸçš„æ‰¾ä¸åˆ°é—®é¢˜æ‰€åœ¨ï¼Œå¦åˆ™ä½ ä¸éœ€è¦ä½¿ç”¨å›æº¯ã€‚ä½†å¹¸è¿çš„æ˜¯ä½ ä¹Ÿä¸éœ€è¦å…¨éƒ¨ç†è§£ã€‚ å¦‚æœä½ ç»§ç»­é˜…è¯»ï¼Œä½ æœ€ç»ˆä¼šçœ‹åˆ°ç¬¬13è¡Œï¼Œé‚£é‡Œå†™ç€<code>playground</code>--é‚£æ˜¯å®ƒæåˆ°çš„ä½ çš„ä»£ç çš„ä½ç½®ã€‚å…¶ä»–çš„éƒ½æ˜¯å…³äºRustä¸ºäº†è¿è¡Œä½ çš„ç¨‹åº,åœ¨å…¶ä»–åº“ä¸­æ‰€åšçš„äº‹æƒ…ã€‚ä½†æ˜¯è¿™ä¸¤è¡Œå‘Šè¯‰ä½ ï¼Œå®ƒçœ‹çš„æ˜¯playgroundçš„ç¬¬2è¡Œå’Œç¬¬3è¡Œï¼Œè¿™æ˜¯ä¸€ä¸ªæç¤ºï¼Œè¦æ£€æŸ¥é‚£é‡Œã€‚è¿™é‡Œæ˜¯é‚£ä¸ªéƒ¨åˆ†:</p>
<pre><code class="language-text">  13: playground::two_is_two
             at src/lib.rs:3
  14: playground::two_is_two::{{closure}}
             at src/lib.rs:2
</code></pre>
<p>ç¼–è¾‘ï¼šRuståœ¨2021å¹´åˆæ”¹è¿›äº†å…¶å›æº¯ä¿¡æ¯ï¼Œåªæ˜¾ç¤ºæœ€æœ‰æ„ä¹‰çš„ä¿¡æ¯ã€‚ç°åœ¨å®ƒæ›´å®¹æ˜“é˜…è¯»ã€‚</p>
<pre><code class="language-text">failures:

---- two_is_two stdout ----
thread 'two_is_two' panicked at 'assertion failed: `(left == right)`
  left: `2`,
 right: `3`', src/lib.rs:3:5
stack backtrace:
   0: rust_begin_unwind
             at /rustc/cb75ad5db02783e8b0222fee363c5f63f7e2cf5b/library/std/src/panicking.rs:493:5
   1: core::panicking::panic_fmt
             at /rustc/cb75ad5db02783e8b0222fee363c5f63f7e2cf5b/library/core/src/panicking.rs:92:14
   2: playground::two_is_two
             at ./src/lib.rs:3:5
   3: playground::two_is_two::{{closure}}
             at ./src/lib.rs:2:1
   4: core::ops::function::FnOnce::call_once
             at /rustc/cb75ad5db02783e8b0222fee363c5f63f7e2cf5b/library/core/src/ops/function.rs:227:5
   5: core::ops::function::FnOnce::call_once
             at /rustc/cb75ad5db02783e8b0222fee363c5f63f7e2cf5b/library/core/src/ops/function.rs:227:5
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.


failures:
    two_is_two

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.02s
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å†æŠŠå›æº¯å…³é—­ï¼Œå›åˆ°å¸¸è§„æµ‹è¯•ã€‚ç°åœ¨æˆ‘ä»¬è¦å†™ä¸€äº›å…¶ä»–å‡½æ•°ï¼Œå¹¶ä½¿ç”¨æµ‹è¯•å‡½æ•°æ¥æµ‹è¯•å®ƒä»¬ã€‚è¿™é‡Œæœ‰å‡ ä¸ª:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn return_two() -&gt; i8 {
    2
}
<span class="boring">[test]
</span>fn it_returns_two() {
    assert_eq!(return_two(), 2);
}

fn return_six() -&gt; i8 {
    4 + return_two()
}
<span class="boring">[test]
</span>fn it_returns_six() {
    assert_eq!(return_six(), 6)
}
<span class="boring">}</span></code></pre></pre>
<p>ç°åœ¨ï¼Œéƒ½èƒ½è¿è¡Œ:</p>
<pre><code class="language-text">running 2 tests
test it_returns_two ... ok
test it_returns_six ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out
</code></pre>
<p>è¿™ä¸æ˜¯å¤ªéš¾ã€‚</p>
<p>é€šå¸¸ä½ ä¼šæƒ³æŠŠä½ çš„æµ‹è¯•æ”¾åœ¨è‡ªå·±çš„æ¨¡å—ä¸­ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯·ä½¿ç”¨ç›¸åŒçš„ <code>mod</code> å…³é”®å­—ï¼Œå¹¶åœ¨å…¶ä¸Šæ–¹æ·»åŠ  <code>#[cfg(test)]</code>(è®°ä½:<code>cfg</code> çš„æ„æ€æ˜¯ "é…ç½®")ã€‚ä½ è¿˜è¦åœ¨æ¯ä¸ªæµ‹è¯•ä¸Šé¢ç»§ç»­å†™<code>#[test]</code>ã€‚è¿™æ˜¯å› ä¸ºä»¥åå½“ä½ å®‰è£…Rustæ—¶ï¼Œä½ å¯ä»¥åšæ›´å¤æ‚çš„æµ‹è¯•ã€‚ä½ å°†å¯ä»¥è¿è¡Œä¸€ä¸ªæµ‹è¯•ï¼Œæˆ–è€…æ‰€æœ‰çš„æµ‹è¯•ï¼Œæˆ–è€…è¿è¡Œå‡ ä¸ªæµ‹è¯•ã€‚å¦å¤–åˆ«å¿˜äº†å†™<code>use super::*;</code>ï¼Œå› ä¸ºæµ‹è¯•æ¨¡å—éœ€è¦ä½¿ç”¨ä¸Šé¢çš„å‡½æ•°ã€‚ç°åœ¨å®ƒçœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·çš„ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn return_two() -&gt; i8 {
    2
}
fn return_six() -&gt; i8 {
    4 + return_two()
}

<span class="boring">[cfg(test)]
</span>mod tests {
    use super::*;

    #[test]
    fn it_returns_six() {
        assert_eq!(return_six(), 6)
    }
    #[test]
    fn it_returns_two() {
        assert_eq!(return_two(), 2);
    }
}
<span class="boring">}</span></code></pre></pre>
<h3 id="æµ‹è¯•é©±åŠ¨çš„å¼€å‘"><a class="header" href="#æµ‹è¯•é©±åŠ¨çš„å¼€å‘">æµ‹è¯•é©±åŠ¨çš„å¼€å‘</a></h3>
<p>åœ¨é˜…è¯»Rustæˆ–å…¶ä»–è¯­è¨€æ—¶ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ° "æµ‹è¯•é©±åŠ¨å¼€å‘"è¿™ä¸ªè¯ã€‚è¿™æ˜¯ç¼–å†™ç¨‹åºçš„ä¸€ç§æ–¹å¼ï¼Œæœ‰äº›äººå–œæ¬¢å®ƒï¼Œè€Œæœ‰äº›äººåˆ™å–œæ¬¢å…¶ä»–çš„æ–¹å¼ã€‚"æµ‹è¯•é©±åŠ¨å¼€å‘"çš„æ„æ€æ˜¯ "å…ˆå†™æµ‹è¯•ï¼Œå†å†™ä»£ç "ã€‚å½“ä½ è¿™æ ·åšçš„æ—¶å€™ï¼Œä½ ä¼šæœ‰å¾ˆå¤šå…³äºä½ æƒ³è¦ä½ çš„ä»£ç åšçš„æ‰€æœ‰äº‹æƒ…çš„æµ‹è¯•ä»£ç ã€‚ç„¶åä½ å¼€å§‹å†™ä»£ç ï¼Œå¹¶è¿è¡Œæµ‹è¯•ï¼Œçœ‹çœ‹ä½ æ˜¯å¦åšå¯¹äº†ã€‚ç„¶åï¼Œå½“ä½ æ·»åŠ å’Œé‡å†™ä»£ç æ—¶ï¼Œå¦‚æœæœ‰ä»€ä¹ˆåœ°æ–¹å‡ºäº†é—®é¢˜ï¼Œæµ‹è¯•ä»£ç ä¼šä¸€ç›´åœ¨é‚£é‡Œå‘ä½ å±•ç¤ºã€‚è¿™åœ¨Rustä¸­æ˜¯éå¸¸å®¹æ˜“çš„ï¼Œå› ä¸ºç¼–è¯‘å™¨ç»™å‡ºäº†å¾ˆå¤šå¾…ä¿®å¤å†…å®¹çš„ä¿¡æ¯ã€‚è®©æˆ‘ä»¬å†™ä¸€ä¸ªæµ‹è¯•é©±åŠ¨å¼€å‘çš„å°ä¾‹å­ï¼Œçœ‹çœ‹å®ƒæ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚</p>
<p>è®©æˆ‘ä»¬æƒ³è±¡ä¸€ä¸ªæ¥å—ç”¨æˆ·è¾“å…¥çš„è®¡ç®—å™¨ã€‚å®ƒå¯ä»¥åŠ (+)ï¼Œä¹Ÿå¯ä»¥å‡(-)ã€‚å¦‚æœç”¨æˆ·å†™ "5+6"ï¼Œå®ƒåº”è¯¥è¿”å›11ï¼Œå¦‚æœç”¨æˆ·å†™ "5+6-7"ï¼Œå®ƒåº”è¯¥è¿”å›4ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆä»æµ‹è¯•å‡½æ•°å¼€å§‹ã€‚ä½ ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæµ‹è¯•ä¸­çš„å‡½æ•°åé€šå¸¸éƒ½ç›¸å½“é•¿ã€‚è¿™æ˜¯å› ä¸ºä½ å¯èƒ½ä¼šè¿è¡Œå¾ˆå¤šæµ‹è¯•ï¼Œä½ æƒ³äº†è§£å“ªäº›æµ‹è¯•å¤±è´¥äº†ã€‚</p>
<p>æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªåä¸º<code>math()</code>çš„å‡½æ•°å°±å¯ä»¥å®Œæˆæ‰€æœ‰çš„å·¥ä½œã€‚å®ƒå°†è¿”å›ä¸€ä¸ª <code>i32</code>(æˆ‘ä»¬ä¸ä¼šä½¿ç”¨æµ®ç‚¹æ•°)ã€‚å› ä¸ºå®ƒéœ€è¦è¿”å›ä¸€äº›ä¸œè¥¿ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡éƒ½åªè¿”å› <code>6</code>ã€‚ç„¶åæˆ‘ä»¬å°†å†™ä¸‰ä¸ªæµ‹è¯•å‡½æ•°ã€‚å½“ç„¶ï¼Œå®ƒä»¬éƒ½ä¼šå¤±è´¥ã€‚ç°åœ¨çš„ä»£ç æ˜¯è¿™æ ·çš„ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn math(input: &amp;str) -&gt; i32 {
    6
}

<span class="boring">[cfg(test)]
</span>mod tests {
    use super::*;

    #[test]
    fn one_plus_one_is_two() {
        assert_eq!(math("1 + 1"), 2);
    }
    #[test]
    fn one_minus_two_is_minus_one() {
        assert_eq!(math("1 - 2"), -1);
    }
    #[test]
    fn one_minus_minus_one_is_two() {
        assert_eq!(math("1 - -1"), 2);
    }
}
<span class="boring">}</span></code></pre></pre>
<p>å®ƒç»™äº†æˆ‘ä»¬è¿™ä¸ªä¿¡æ¯ã€‚</p>
<pre><code class="language-text">running 3 tests
test tests::one_minus_minus_one_is_two ... FAILED
test tests::one_minus_two_is_minus_one ... FAILED
test tests::one_plus_one_is_two ... FAILED
</code></pre>
<p>ä»¥åŠ<code>thread 'tests::one_plus_one_is_two' panicked at 'assertion failed: `(left == right)` </code>çš„æ‰€æœ‰ä¿¡æ¯ã€‚æˆ‘ä»¬ä¸éœ€è¦åœ¨è¿™é‡Œå…¨éƒ¨æ‰“å°å‡ºæ¥ã€‚</p>
<p>ç°åœ¨è¦è€ƒè™‘å¦‚ä½•åˆ›å»ºè®¡ç®—å™¨ã€‚æˆ‘ä»¬å°†æ¥å—ä»»ä½•æ•°å­—ï¼Œä»¥åŠç¬¦å·<code>+-</code>ã€‚æˆ‘ä»¬å°†å…è®¸ç©ºæ ¼ï¼Œä½†ä¸å…è®¸å…¶ä»–ä»»ä½•ä¸œè¥¿ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬ä»åŒ…å«æ‰€æœ‰æ•°å€¼çš„<code>const</code>å¼€å§‹ã€‚ç„¶åæˆ‘ä»¬å°†ä½¿ç”¨ <code>.chars()</code> æŒ‰å­—ç¬¦è¿›è¡Œè¿­ä»£ï¼Œå¹¶ä½¿ç”¨ <code>.all()</code> ç¡®ä¿å®ƒä»¬éƒ½åœ¨é‡Œé¢ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªä¼šå´©æºƒçš„æµ‹è¯•ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ·»åŠ  <code>#[should_panic]</code> å±æ€§:ç°åœ¨å¦‚æœå®ƒå´©æºƒï¼Œæµ‹è¯•å°†æˆåŠŸã€‚</p>
<p>ç°åœ¨ä»£ç çœ‹èµ·æ¥åƒè¿™æ ·:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>const OKAY_CHARACTERS: &amp;str = "1234567890+- "; // Don't forget the space at the end

fn math(input: &amp;str) -&gt; i32 {
    if !input.chars().all(|character| OKAY_CHARACTERS.contains(character)) {
        panic!("Please only input numbers, +-, or spaces");
    }
    6 // we still return a 6 for now
}

<span class="boring">[cfg(test)]
</span>mod tests {
    use super::*;

    #[test]
    fn one_plus_one_is_two() {
        assert_eq!(math("1 + 1"), 2);
    }
    #[test]
    fn one_minus_two_is_minus_one() {
        assert_eq!(math("1 - 2"), -1);
    }
    #[test]
    fn one_minus_minus_one_is_two() {
        assert_eq!(math("1 - -1"), 2);
    }

    #[test]
    #[should_panic]  // Here is our new test - it should panic
    fn panics_when_characters_not_right() {
        math("7 + seven");
    }
}
<span class="boring">}</span></code></pre></pre>
<p>ç°åœ¨ï¼Œå½“æˆ‘ä»¬è¿è¡Œæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°è¿™æ ·çš„ç»“æœã€‚</p>
<pre><code class="language-text">running 4 tests
test tests::one_minus_two_is_minus_one ... FAILED
test tests::one_minus_minus_one_is_two ... FAILED
test tests::panics_when_characters_not_right ... ok
test tests::one_plus_one_is_two ... FAILED
</code></pre>
<p>ä¸€ä¸ªæˆåŠŸäº†! æˆ‘ä»¬çš„<code>math()</code>å‡½æ•°ç°åœ¨åªèƒ½æ¥å—å¥½çš„è¾“å…¥äº†ã€‚</p>
<p>ä¸‹ä¸€æ­¥æ˜¯ç¼–å†™å®é™…çš„è®¡ç®—å™¨ã€‚è¿™å°±æ˜¯å…ˆæœ‰æµ‹è¯•çš„æœ‰è¶£ä¹‹å¤„:å®é™…çš„ä»£ç è¦æ™šå¾ˆå¤šã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†æŠŠè®¡ç®—å™¨çš„é€»è¾‘æ”¾åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬è¦åšåˆ°ä»¥ä¸‹å‡ ç‚¹ã€‚</p>
<ul>
<li>æ‰€æœ‰çš„ç©ºä½éƒ½åº”è¯¥è¢«åˆ é™¤ã€‚è¿™åœ¨<code>.filter()</code>ä¸­å¾ˆå®¹æ˜“å®ç°ã€‚</li>
<li>æ‰€æœ‰è¾“å…¥åº”è¯¥å˜æˆä¸€ä¸ª<code>Vec</code>ã€‚<code>+</code>ä¸éœ€è¦æˆä¸ºè¾“å…¥ï¼Œä½†æ˜¯å½“ç¨‹åºçœ‹åˆ°<code>+</code>æ—¶ï¼Œåº”è¯¥çŸ¥é“è¿™ä¸ªæ•°å­—å·²ç»å®Œæˆäº†ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥<code>+</code>åº”è¯¥è¿™æ ·åš:
<ol>
<li>çœ‹åˆ°<code>1</code>ï¼ŒæŠŠå®ƒæ¨åˆ°ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ä¸­ã€‚</li>
<li>çœ‹åˆ°å¦ä¸€ä¸ª1ï¼ŒæŠŠå®ƒæ¨å…¥å­—ç¬¦ä¸²ä¸­(ç°åœ¨æ˜¯ "11")ã€‚</li>
<li>çœ‹åˆ°ä¸€ä¸ª<code>+</code>ï¼ŒçŸ¥é“è¿™ä¸ªæ•°å­—å·²ç»ç»“æŸã€‚å®ƒä¼šæŠŠå­—ç¬¦ä¸²æ¨å…¥vecä¸­ï¼Œç„¶åæ¸…ç©ºå­—ç¬¦ä¸²ã€‚</li>
</ol>
</li>
<li>ç¨‹åºå¿…é¡»è®¡ç®—å‡º<code>-</code>çš„æ•°é‡ã€‚å¥‡æ•°(1ï¼Œ3ï¼Œ5...)è¡¨ç¤ºå‡æ³•ï¼Œå¶æ•°(2ï¼Œ4ï¼Œ6...)è¡¨ç¤ºåŠ æ³•ã€‚æ‰€ä»¥ "1--9"åº”è¯¥æ˜¯10ï¼Œè€Œä¸æ˜¯-8ã€‚</li>
<li>ç¨‹åºåº”è¯¥åˆ é™¤æœ€åä¸€ä¸ªæ•°å­—åé¢çš„ä»»ä½•ä¸œè¥¿ã€‚<code>5+5+++++----</code>æ˜¯ç”±<code>OKAY_CHARACTERS</code>ä¸­çš„æ‰€æœ‰å­—ç¬¦ç»„æˆçš„ï¼Œä½†å®ƒåº”è¯¥å˜æˆ<code>5+5</code>ã€‚<code>.trim_end_matches()</code>å°±å¾ˆç®€å•äº†ï¼Œä½ æŠŠ<code>&amp;str</code>æœ«å°¾ç¬¦åˆçš„ä¸œè¥¿éƒ½å»æ‰ã€‚</li>
</ul>
<p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œ<code>.trim_end_matches()</code>å’Œ<code>.trim_start_matches()</code>æ›¾ç»æ˜¯<code>trim_right_matches()</code>å’Œ<code>trim_left_matches()</code>ã€‚ä½†åæ¥äººä»¬æ³¨æ„åˆ°æœ‰äº›è¯­è¨€æ˜¯ä»å³åˆ°å·¦(æ³¢æ–¯è¯­ã€å¸Œä¼¯æ¥è¯­ç­‰)ï¼Œæ‰€ä»¥å·¦å³éƒ½æ˜¯é”™çš„ã€‚ä½ å¯èƒ½è¿˜èƒ½åœ¨ä¸€äº›ä»£ç ä¸­çœ‹åˆ°æ—§çš„åå­—ï¼Œä½†å®ƒä»¬æ˜¯ä¸€æ ·çš„)ã€‚)</p>
<p>é¦–å…ˆæˆ‘ä»¬åªæƒ³é€šè¿‡æ‰€æœ‰çš„æµ‹è¯•ã€‚é€šè¿‡æµ‹è¯•åï¼Œæˆ‘ä»¬å°±å¯ä»¥ "é‡æ„"äº†ã€‚é‡æ„çš„æ„æ€æ˜¯è®©ä»£ç å˜å¾—æ›´å¥½ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç»“æ„ã€æšä¸¾å’Œæ–¹æ³•ç­‰æ–¹å¼ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬ä½¿æµ‹è¯•é€šè¿‡çš„ä»£ç ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>const OKAY_CHARACTERS: &amp;str = "1234567890+- ";

fn math(input: &amp;str) -&gt; i32 {
    if !input.chars().all(|character| OKAY_CHARACTERS.contains(character)) ||
       !input.chars().take(2).any(|character| character.is_numeric())
    {
        panic!("Please only input numbers, +-, or spaces.");
    }

    let input = input.trim_end_matches(|x| "+- ".contains(x)).chars().filter(|x| *x != ' ').collect::&lt;String&gt;(); // Remove + and - at the end, and all spaces
    let mut result_vec = vec![]; // Results go in here
    let mut push_string = String::new(); // This is the string we push in every time. We will keep reusing it in the loop.
    for character in input.chars() {
        match character {
            '+' =&gt; {
                if !push_string.is_empty() { // If the string is empty, we don't want to push "" into result_vec
                    result_vec.push(push_string.clone()); // But if it's not empty, it will be a number. Push it into the vec
                    push_string.clear(); // Then clear the string
                }
            },
            '-' =&gt; { // If we get a -,
                if push_string.contains('-') || push_string.is_empty() { // check to see if it's empty or has a -
                    push_string.push(character) // if so, then push it in
                } else { // otherwise, it will contain a number
                result_vec.push(push_string.clone()); // so push the number into result_vec, clear it and then push -
                push_string.clear();
                push_string.push(character);
                }
            },
            number =&gt; { // number here means "anything else that matches". We selected the name here
                if push_string.contains('-') { // We might have some - characters to push in first
                    result_vec.push(push_string.clone());
                    push_string.clear();
                    push_string.push(number);
                } else { // But if we don't, that means we can push the number in
                    push_string.push(number);
                }
            },
        }
    }
    result_vec.push(push_string); // Push one last time after the loop is over. Don't need to .clone() because we don't use it anymore

    let mut total = 0; // Now it's time to do math. Start with a total
    let mut adds = true; // true = add, false = subtract
    let mut math_iter = result_vec.into_iter();
    while let Some(entry) = math_iter.next() { // Iter through the items
        if entry.contains('-') { // If it has a - character, check if it's even or odd
            if entry.chars().count() % 2 == 1 {
                adds = match adds {
                    true =&gt; false,
                    false =&gt; true
                };
                continue; // Go to the next item
            } else {
                continue;
            }
        }
        if adds == true {
            total += entry.parse::&lt;i32&gt;().unwrap(); // If there is no '-', it must be a number. So we are safe to unwrap
        } else {
            total -= entry.parse::&lt;i32&gt;().unwrap();
            adds = true;  // After subtracting, reset adds to true.
        }
    }
    total // Finally, return the total
}
   /// We'll add a few more tests just to make sure

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn one_plus_one_is_two() {
        assert_eq!(math("1 + 1"), 2);
    }
    #[test]
    fn one_minus_two_is_minus_one() {
        assert_eq!(math("1 - 2"), -1);
    }
    #[test]
    fn one_minus_minus_one_is_two() {
        assert_eq!(math("1 - -1"), 2);
    }
    #[test]
    fn nine_plus_nine_minus_nine_minus_nine_is_zero() {
        assert_eq!(math("9+9-9-9"), 0); // This is a new test
    }
    #[test]
    fn eight_minus_nine_plus_nine_is_eight_even_with_characters_on_the_end() {
        assert_eq!(math("8  - 9     +9-----+++++"), 8); // This is a new test
    }
    #[test]
    #[should_panic]
    fn panics_when_characters_not_right() {
        math("7 + seven");
    }
}
<span class="boring">}</span></code></pre></pre>
<p>ç°åœ¨æµ‹è¯•é€šè¿‡äº†!</p>
<pre><code class="language-text">running 6 tests
test tests::one_minus_minus_one_is_two ... ok
test tests::nine_plus_nine_minus_nine_minus_nine_is_zero ... ok
test tests::one_minus_two_is_minus_one ... ok
test tests::eight_minus_nine_plus_nine_is_eight_even_with_characters_on_the_end ... ok
test tests::one_plus_one_is_two ... ok
test tests::panics_when_characters_not_right ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out
</code></pre>
<p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æµ‹è¯•é©±åŠ¨çš„å¼€å‘ä¸­ï¼Œæœ‰ä¸€ä¸ªæ¥å›çš„è¿‡ç¨‹ã€‚å®ƒæ˜¯è¿™æ ·çš„ã€‚</p>
<ul>
<li>é¦–å…ˆä½ è¦å†™å‡ºæ‰€æœ‰ä½ èƒ½æƒ³åˆ°çš„æµ‹è¯•</li>
<li>ç„¶åä½ å¼€å§‹å†™ä»£ç ã€‚</li>
<li>å½“ä½ å†™ä»£ç çš„æ—¶å€™ï¼Œä½ ä¼šæœ‰å…¶ä»–æµ‹è¯•çš„æƒ³æ³•ã€‚</li>
<li>ä½ æ·»åŠ æµ‹è¯•ï¼Œä½ çš„æµ‹è¯•éšç€ä½ çš„å‘å±•è€Œå¢é•¿ã€‚ä½ çš„æµ‹è¯•è¶Šå¤šï¼Œä½ çš„ä»£ç è¢«æ£€æŸ¥çš„æ¬¡æ•°å°±è¶Šå¤šã€‚</li>
</ul>
<p>å½“ç„¶ï¼Œæµ‹è¯•å¹¶ä¸èƒ½æ£€æŸ¥æ‰€æœ‰çš„ä¸œè¥¿ï¼Œè®¤ä¸º "é€šè¿‡æ‰€æœ‰æµ‹è¯•=ä»£ç æ˜¯å®Œç¾çš„"æ˜¯é”™è¯¯çš„ã€‚ä½†æ˜¯ï¼Œæµ‹è¯•å¯¹äºä½ ä¿®æ”¹ä»£ç çš„æ—¶å€™æ˜¯éå¸¸å¥½çš„ã€‚å¦‚æœä½ ä»¥åä¿®æ”¹äº†ä»£ç ï¼Œç„¶åè¿è¡Œæµ‹è¯•ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªæµ‹è¯•ä¸æˆåŠŸï¼Œä½ å°±ä¼šçŸ¥é“è¯¥æ€ä¹ˆä¿®å¤ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥é‡å†™(é‡æ„)ä¸€ä¸‹ä»£ç ã€‚ä¸€ä¸ªå¥½çš„æ–¹æ³•æ˜¯ç”¨clippyå¼€å§‹ã€‚å¦‚æœä½ å®‰è£…äº†Rustï¼Œé‚£ä¹ˆä½ å¯ä»¥è¾“å…¥<code>cargo clippy</code>ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯Playgroundï¼Œé‚£ä¹ˆç‚¹å‡»<code>TOOLS</code>ï¼Œé€‰æ‹©Clippyã€‚Clippyä¼šæŸ¥çœ‹ä½ çš„ä»£ç ï¼Œå¹¶ç»™ä½ æç¤ºï¼Œè®©ä½ çš„ä»£ç æ›´ç®€å•ã€‚æˆ‘ä»¬çš„ä»£ç æ²¡æœ‰ä»»ä½•é”™è¯¯ï¼Œä½†å®ƒå¯ä»¥æ›´å¥½ã€‚</p>
<p>Clippyä¼šå‘Šè¯‰æˆ‘ä»¬ä¸¤ä»¶äº‹ã€‚</p>
<pre><code class="language-text">warning: this loop could be written as a `for` loop
  --&gt; src/lib.rs:44:5
   |
44 |     while let Some(entry) = math_iter.next() { // Iter through the items
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `for entry in math_iter`
   |
   = note: `#[warn(clippy::while_let_on_iterator)]` on by default
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#while_let_on_iterator

warning: equality checks against true are unnecessary
  --&gt; src/lib.rs:53:12
   |
53 |         if adds == true {
   |            ^^^^^^^^^^^^ help: try simplifying it as shown: `adds`
   |
   = note: `#[warn(clippy::bool_comparison)]` on by default
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_comparison
</code></pre>
<p>è¿™æ˜¯çœŸçš„:<code>for entry in math_iter</code>æ¯”<code>while let Some(entry) = math_iter.next()</code>ç®€å•å¾—å¤šã€‚è€Œ<code>for</code>å¾ªç¯å®é™…ä¸Šæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡æœ‰ä»»ä½•ç†ç”±å†™<code>.iter()</code>ã€‚è°¢è°¢ä½ ï¼Œclippy! è€Œä¸”æˆ‘ä»¬ä¹Ÿä¸éœ€è¦åš<code>math_iter</code>:æˆ‘ä»¬å¯ä»¥ç›´æ¥å†™<code>for entry in result_vec</code>ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å°†å¼€å§‹ä¸€äº›çœŸæ­£çš„é‡æ„ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª <code>Calculator</code> ç»“æ„ä½“ï¼Œè€Œä¸æ˜¯å•ç‹¬çš„å˜é‡ã€‚è¿™å°†æ‹¥æœ‰æˆ‘ä»¬ä½¿ç”¨çš„æ‰€æœ‰å˜é‡ã€‚æˆ‘ä»¬å°†æ”¹å˜ä¸¤ä¸ªåå­—ä»¥ä½¿å…¶æ›´åŠ æ¸…æ™°ã€‚<code>result_vec</code>å°†å˜æˆ<code>results</code>ï¼Œ<code>push_string</code>å°†å˜æˆ<code>current_input</code>(currentçš„æ„æ€æ˜¯ "ç°åœ¨")ã€‚è€Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œå®ƒåªæœ‰ä¸€ç§æ–¹æ³•:newã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
#[derive(Clone)]
struct Calculator {
    results: Vec&lt;String&gt;,
    current_input: String,
    total: i32,
    adds: bool,
}

impl Calculator {
    fn new() -&gt; Self {
        Self {
            results: vec![],
            current_input: String::new(),
            total: 0,
            adds: true,
        }
    }
}
<span class="boring">}</span></code></pre></pre>
<p>ç°åœ¨æˆ‘ä»¬çš„ä»£ç å…¶å®æ¯”è¾ƒé•¿ï¼Œä½†æ›´å®¹æ˜“è¯»æ‡‚ã€‚æ¯”å¦‚ï¼Œ<code>if adds</code>ç°åœ¨æ˜¯<code>if calculator.adds</code>ï¼Œè¿™å°±è·Ÿè¯»è‹±æ–‡å®Œå…¨ä¸€æ ·ã€‚å®ƒçš„æ ·å­æ˜¯è¿™æ ·çš„:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Clone)]
struct Calculator {
    results: Vec&lt;String&gt;,
    current_input: String,
    total: i32,
    adds: bool,
}

impl Calculator {
    fn new() -&gt; Self {
        Self {
            results: vec![],
            current_input: String::new(),
            total: 0,
            adds: true,
        }
    }
}

const OKAY_CHARACTERS: &amp;str = "1234567890+- ";

fn math(input: &amp;str) -&gt; i32 {
    if !input.chars().all(|character| OKAY_CHARACTERS.contains(character)) ||
       !input.chars().take(2).any(|character| character.is_numeric()) {
        panic!("Please only input numbers, +-, or spaces");
    }

    let input = input.trim_end_matches(|x| "+- ".contains(x)).chars().filter(|x| *x != ' ').collect::&lt;String&gt;();
    let mut calculator = Calculator::new();

    for character in input.chars() {
        match character {
            '+' =&gt; {
                if !calculator.current_input.is_empty() {
                    calculator.results.push(calculator.current_input.clone());
                    calculator.current_input.clear();
                }
            },
            '-' =&gt; {
                if calculator.current_input.contains('-') || calculator.current_input.is_empty() {
                    calculator.current_input.push(character)
                } else {
                calculator.results.push(calculator.current_input.clone());
                calculator.current_input.clear();
                calculator.current_input.push(character);
                }
            },
            number =&gt; {
                if calculator.current_input.contains('-') {
                    calculator.results.push(calculator.current_input.clone());
                    calculator.current_input.clear();
                    calculator.current_input.push(number);
                } else {
                    calculator.current_input.push(number);
                }
            },
        }
    }
    calculator.results.push(calculator.current_input);

    for entry in calculator.results {
        if entry.contains('-') {
            if entry.chars().count() % 2 == 1 {
                calculator.adds = match calculator.adds {
                    true =&gt; false,
                    false =&gt; true
                };
                continue;
            } else {
                continue;
            }
        }
        if calculator.adds {
            calculator.total += entry.parse::&lt;i32&gt;().unwrap();
        } else {
            calculator.total -= entry.parse::&lt;i32&gt;().unwrap();
            calculator.adds = true;
        }
    }
    calculator.total
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn one_plus_one_is_two() {
        assert_eq!(math("1 + 1"), 2);
    }
    #[test]
    fn one_minus_two_is_minus_one() {
        assert_eq!(math("1 - 2"), -1);
    }
    #[test]
    fn one_minus_minus_one_is_two() {
        assert_eq!(math("1 - -1"), 2);
    }
    #[test]
    fn nine_plus_nine_minus_nine_minus_nine_is_zero() {
        assert_eq!(math("9+9-9-9"), 0);
    }
    #[test]
    fn eight_minus_nine_plus_nine_is_eight_even_with_characters_on_the_end() {
        assert_eq!(math("8  - 9     +9-----+++++"), 8);
    }
    #[test]
    #[should_panic]
    fn panics_when_characters_not_right() {
        math("7 + seven");
    }
}
<span class="boring">}</span></code></pre></pre>
<p>æœ€åæˆ‘ä»¬å¢åŠ ä¸¤ä¸ªæ–°æ–¹æ³•ã€‚ä¸€ä¸ªå«åš <code>.clear()</code>ï¼Œæ¸…é™¤ <code>current_input()</code>ã€‚å¦ä¸€ä¸ªå«åš <code>push_char()</code>ï¼ŒæŠŠè¾“å…¥æ¨åˆ° <code>current_input()</code> ä¸Šã€‚è¿™æ˜¯æˆ‘ä»¬é‡æ„åçš„ä»£ç ã€‚</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Clone)]
struct Calculator {
    results: Vec&lt;String&gt;,
    current_input: String,
    total: i32,
    adds: bool,
}

impl Calculator {
    fn new() -&gt; Self {
        Self {
            results: vec![],
            current_input: String::new(),
            total: 0,
            adds: true,
        }
    }

    fn clear(&amp;mut self) {
        self.current_input.clear();
    }

    fn push_char(&amp;mut self, character: char) {
        self.current_input.push(character);
    }
}

const OKAY_CHARACTERS: &amp;str = "1234567890+- ";

fn math(input: &amp;str) -&gt; i32 {
    if !input.chars().all(|character| OKAY_CHARACTERS.contains(character)) ||
       !input.chars().take(2).any(|character| character.is_numeric()) {
        panic!("Please only input numbers, +-, or spaces");
    }

    let input = input.trim_end_matches(|x| "+- ".contains(x)).chars().filter(|x| *x != ' ').collect::&lt;String&gt;();
    let mut calculator = Calculator::new();

    for character in input.chars() {
        match character {
            '+' =&gt; {
                if !calculator.current_input.is_empty() {
                    calculator.results.push(calculator.current_input.clone());
                    calculator.clear();
                }
            },
            '-' =&gt; {
                if calculator.current_input.contains('-') || calculator.current_input.is_empty() {
                    calculator.push_char(character)
                } else {
                calculator.results.push(calculator.current_input.clone());
                calculator.clear();
                calculator.push_char(character);
                }
            },
            number =&gt; {
                if calculator.current_input.contains('-') {
                    calculator.results.push(calculator.current_input.clone());
                    calculator.clear();
                    calculator.push_char(number);
                } else {
                    calculator.push_char(number);
                }
            },
        }
    }
    calculator.results.push(calculator.current_input);

    for entry in calculator.results {
        if entry.contains('-') {
            if entry.chars().count() % 2 == 1 {
                calculator.adds = match calculator.adds {
                    true =&gt; false,
                    false =&gt; true
                };
                continue;
            } else {
                continue;
            }
        }
        if calculator.adds {
            calculator.total += entry.parse::&lt;i32&gt;().unwrap();
        } else {
            calculator.total -= entry.parse::&lt;i32&gt;().unwrap();
            calculator.adds = true;
        }
    }
    calculator.total
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn one_plus_one_is_two() {
        assert_eq!(math("1 + 1"), 2);
    }
    #[test]
    fn one_minus_two_is_minus_one() {
        assert_eq!(math("1 - 2"), -1);
    }
    #[test]
    fn one_minus_minus_one_is_two() {
        assert_eq!(math("1 - -1"), 2);
    }
    #[test]
    fn nine_plus_nine_minus_nine_minus_nine_is_zero() {
        assert_eq!(math("9+9-9-9"), 0);
    }
    #[test]
    fn eight_minus_nine_plus_nine_is_eight_even_with_characters_on_the_end() {
        assert_eq!(math("8  - 9     +9-----+++++"), 8);
    }
    #[test]
    #[should_panic]
    fn panics_when_characters_not_right() {
        math("7 + seven");
    }
}
<span class="boring">}</span></code></pre></pre>
<p>ç°åœ¨å¤§æ¦‚å·²ç»å¤Ÿå¥½äº†ã€‚æˆ‘ä»¬å¯ä»¥å†™æ›´å¤šçš„æ–¹æ³•ï¼Œä½†æ˜¯åƒ<code>calculator.results.push(calculator.current_input.clone());</code>è¿™æ ·çš„è¡Œå·²ç»å¾ˆæ¸…æ¥šäº†ã€‚é‡æ„æœ€å¥½æ˜¯åœ¨ä½ å®Œæˆåè¿˜èƒ½è½»æ¾é˜…è¯»ä»£ç çš„æ—¶å€™ã€‚ä½ ä¸å¸Œæœ›åªæ˜¯ä¸ºäº†è®©ä»£ç å˜çŸ­è€Œé‡æ„:ä¾‹å¦‚ï¼Œ<code>clc.clr()</code>å°±æ¯”<code>calculator.clear()</code>å·®å¾ˆå¤šã€‚</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="Chapter_57.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="Chapter_59.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="Chapter_57.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="Chapter_59.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
