<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title> ç‰¹æ€§ - ç®€å•è‹±è¯­å­¦Rust</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="Chapter_0.html"><strong aria-hidden="true">1.</strong>  æ›´æ–°</a></li><li class="chapter-item expanded "><a href="Chapter_1.html"><strong aria-hidden="true">2.</strong>  ä»‹ç»</a></li><li class="chapter-item expanded "><a href="Chapter_2.html"><strong aria-hidden="true">3.</strong>  æˆ‘æ˜¯è°ï¼Ÿ</a></li><li class="chapter-item expanded "><a href="Chapter_3.html"><strong aria-hidden="true">4.</strong>  ç®€å•è‹±è¯­å­¦Rust</a></li><li class="chapter-item expanded "><a href="Chapter_4.html"><strong aria-hidden="true">5.</strong>  Rust Playground</a></li><li class="chapter-item expanded "><a href="Chapter_5.html"><strong aria-hidden="true">6.</strong>  ğŸš§å’Œâš ï¸</a></li><li class="chapter-item expanded "><a href="Chapter_6.html"><strong aria-hidden="true">7.</strong>  æ³¨é‡Š</a></li><li class="chapter-item expanded "><a href="Chapter_7.html"><strong aria-hidden="true">8.</strong>  ç±»å‹</a></li><li class="chapter-item expanded "><a href="Chapter_8.html"><strong aria-hidden="true">9.</strong>  ç±»å‹æ¨å¯¼</a></li><li class="chapter-item expanded "><a href="Chapter_9.html"><strong aria-hidden="true">10.</strong>  æ‰“å°hello, world!</a></li><li class="chapter-item expanded "><a href="Chapter_10.html"><strong aria-hidden="true">11.</strong>  æ˜¾ç¤ºå’Œè°ƒè¯•</a></li><li class="chapter-item expanded "><a href="Chapter_11.html"><strong aria-hidden="true">12.</strong>  å¯å˜æ€§</a></li><li class="chapter-item expanded "><a href="Chapter_12.html"><strong aria-hidden="true">13.</strong>  æ ˆã€å †å’ŒæŒ‡é’ˆ</a></li><li class="chapter-item expanded "><a href="Chapter_13.html"><strong aria-hidden="true">14.</strong>  å…³äºæ‰“å°çš„æ›´å¤šä¿¡æ¯</a></li><li class="chapter-item expanded "><a href="Chapter_14.html"><strong aria-hidden="true">15.</strong>  å­—ç¬¦ä¸²</a></li><li class="chapter-item expanded "><a href="Chapter_15.html"><strong aria-hidden="true">16.</strong>  constå’Œstatic</a></li><li class="chapter-item expanded "><a href="Chapter_16.html"><strong aria-hidden="true">17.</strong>  å…³äºå¼•ç”¨çš„æ›´å¤šä¿¡æ¯</a></li><li class="chapter-item expanded "><a href="Chapter_17.html"><strong aria-hidden="true">18.</strong>  å¯å˜å¼•ç”¨</a></li><li class="chapter-item expanded "><a href="Chapter_18.html"><strong aria-hidden="true">19.</strong>  å‡½æ•°çš„å¼•ç”¨</a></li><li class="chapter-item expanded "><a href="Chapter_19.html"><strong aria-hidden="true">20.</strong>  æ‹·è´ç±»å‹</a></li><li class="chapter-item expanded "><a href="Chapter_20.html"><strong aria-hidden="true">21.</strong>  é›†åˆç±»å‹</a></li><li class="chapter-item expanded "><a href="Chapter_21.html"><strong aria-hidden="true">22.</strong>  å‘é‡</a></li><li class="chapter-item expanded "><a href="Chapter_22.html"><strong aria-hidden="true">23.</strong>  å…ƒç»„</a></li><li class="chapter-item expanded "><a href="Chapter_23.html"><strong aria-hidden="true">24.</strong>  æ§åˆ¶æµ</a></li><li class="chapter-item expanded "><a href="Chapter_24.html"><strong aria-hidden="true">25.</strong>  ç»“æ„ä½“</a></li><li class="chapter-item expanded "><a href="Chapter_25.html"><strong aria-hidden="true">26.</strong>  æšä¸¾</a></li><li class="chapter-item expanded "><a href="Chapter_26.html"><strong aria-hidden="true">27.</strong>  å¾ªç¯</a></li><li class="chapter-item expanded "><a href="Chapter_27.html"><strong aria-hidden="true">28.</strong>  å®ç°ç»“æ„ä½“å’Œæšä¸¾</a></li><li class="chapter-item expanded "><a href="Chapter_28.html"><strong aria-hidden="true">29.</strong>  è§£æ„</a></li><li class="chapter-item expanded "><a href="Chapter_29.html"><strong aria-hidden="true">30.</strong>  å¼•ç”¨å’Œç‚¹è¿ç®—ç¬¦</a></li><li class="chapter-item expanded "><a href="Chapter_30.html"><strong aria-hidden="true">31.</strong>  æ³›å‹</a></li><li class="chapter-item expanded "><a href="Chapter_31.html"><strong aria-hidden="true">32.</strong>  Optionå’ŒResult</a></li><li class="chapter-item expanded "><a href="Chapter_32.html"><strong aria-hidden="true">33.</strong>  å…¶ä»–é›†åˆç±»å‹</a></li><li class="chapter-item expanded "><a href="Chapter_33.html"><strong aria-hidden="true">34.</strong>  ?æ“ä½œç¬¦</a></li><li class="chapter-item expanded "><a href="Chapter_34.html" class="active"><strong aria-hidden="true">35.</strong>  ç‰¹æ€§</a></li><li class="chapter-item expanded "><a href="Chapter_35.html"><strong aria-hidden="true">36.</strong>  é“¾å¼æ–¹æ³•</a></li><li class="chapter-item expanded "><a href="Chapter_36.html"><strong aria-hidden="true">37.</strong>  è¿­ä»£å™¨</a></li><li class="chapter-item expanded "><a href="Chapter_37.html"><strong aria-hidden="true">38.</strong>  é—­åŒ…</a></li><li class="chapter-item expanded "><a href="Chapter_38.html"><strong aria-hidden="true">39.</strong>  dbg! å®å’Œ.inspect</a></li><li class="chapter-item expanded "><a href="Chapter_39.html"><strong aria-hidden="true">40.</strong>  &strçš„ç±»å‹</a></li><li class="chapter-item expanded "><a href="Chapter_40.html"><strong aria-hidden="true">41.</strong>  ç”Ÿå‘½æœŸ</a></li><li class="chapter-item expanded "><a href="Chapter_41.html"><strong aria-hidden="true">42.</strong>  å†…éƒ¨å¯å˜æ€§</a></li><li class="chapter-item expanded "><a href="Chapter_42.html"><strong aria-hidden="true">43.</strong>  Cow</a></li><li class="chapter-item expanded "><a href="Chapter_43.html"><strong aria-hidden="true">44.</strong>  ç±»å‹åˆ«å</a></li><li class="chapter-item expanded "><a href="Chapter_44.html"><strong aria-hidden="true">45.</strong>  todo!å®</a></li><li class="chapter-item expanded "><a href="Chapter_45.html"><strong aria-hidden="true">46.</strong>  Rc</a></li><li class="chapter-item expanded "><a href="Chapter_46.html"><strong aria-hidden="true">47.</strong>  å¤šçº¿ç¨‹</a></li><li class="chapter-item expanded "><a href="Chapter_47.html"><strong aria-hidden="true">48.</strong>  å‡½æ•°ä¸­çš„é—­åŒ…</a></li><li class="chapter-item expanded "><a href="Chapter_48.html"><strong aria-hidden="true">49.</strong>  impl Trait</a></li><li class="chapter-item expanded "><a href="Chapter_49.html"><strong aria-hidden="true">50.</strong>  Arc</a></li><li class="chapter-item expanded "><a href="Chapter_50.html"><strong aria-hidden="true">51.</strong>  Channels</a></li><li class="chapter-item expanded "><a href="Chapter_51.html"><strong aria-hidden="true">52.</strong>  é˜…è¯»Rustæ–‡æ¡£</a></li><li class="chapter-item expanded "><a href="Chapter_52.html"><strong aria-hidden="true">53.</strong>  å±æ€§</a></li><li class="chapter-item expanded "><a href="Chapter_53.html"><strong aria-hidden="true">54.</strong>  Box</a></li><li class="chapter-item expanded "><a href="Chapter_54.html"><strong aria-hidden="true">55.</strong>  ç”¨BoxåŒ…è£¹trait</a></li><li class="chapter-item expanded "><a href="Chapter_55.html"><strong aria-hidden="true">56.</strong>  é»˜è®¤å€¼å’Œå»ºé€ è€…æ¨¡å¼</a></li><li class="chapter-item expanded "><a href="Chapter_56.html"><strong aria-hidden="true">57.</strong>  Derefå’ŒDerefMut</a></li><li class="chapter-item expanded "><a href="Chapter_57.html"><strong aria-hidden="true">58.</strong>  Crateå’Œæ¨¡å—</a></li><li class="chapter-item expanded "><a href="Chapter_58.html"><strong aria-hidden="true">59.</strong>  æµ‹è¯•</a></li><li class="chapter-item expanded "><a href="Chapter_59.html"><strong aria-hidden="true">60.</strong>  å¤–éƒ¨crate</a></li><li class="chapter-item expanded "><a href="Chapter_60.html"><strong aria-hidden="true">61.</strong>  æ ‡å‡†åº“ä¹‹æ—…</a></li><li class="chapter-item expanded "><a href="Chapter_61.html"><strong aria-hidden="true">62.</strong>  ç¼–å†™å®</a></li><li class="chapter-item expanded "><a href="Chapter_62.html"><strong aria-hidden="true">63.</strong>  cargo</a></li><li class="chapter-item expanded "><a href="Chapter_63.html"><strong aria-hidden="true">64.</strong>  æ¥å—ç”¨æˆ·è¾“å…¥</a></li><li class="chapter-item expanded "><a href="Chapter_64.html"><strong aria-hidden="true">65.</strong>  ä½¿ç”¨æ–‡ä»¶</a></li><li class="chapter-item expanded "><a href="Chapter_65.html"><strong aria-hidden="true">66.</strong>  cargoæ–‡æ¡£</a></li><li class="chapter-item expanded "><a href="Chapter_66.html"><strong aria-hidden="true">67.</strong>  ç»“æŸäº†å—ï¼Ÿ</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ç®€å•è‹±è¯­å­¦Rust</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="ç‰¹æ€§"><a class="header" href="#ç‰¹æ€§">ç‰¹æ€§</a></h2>
<p>æˆ‘ä»¬ä»¥å‰è§è¿‡trait:<code>Debug</code>ã€<code>Copy</code>ã€<code>Clone</code>éƒ½æ˜¯traitã€‚è¦ç»™ä¸€ä¸ªç±»å‹ä¸€ä¸ªtraitï¼Œå°±å¿…é¡»å®ç°å®ƒã€‚å› ä¸º<code>Debug</code>å’Œå…¶ä»–çš„traitéƒ½å¾ˆå¸¸è§ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰è‡ªåŠ¨å®ç°çš„å±æ€§ã€‚è¿™å°±æ˜¯å½“ä½ å†™ä¸‹<code>#[derive(Debug)]</code>æ‰€å‘ç”Ÿçš„äº‹æƒ…:ä½ è‡ªåŠ¨å®ç°äº†<code>Debug</code>ã€‚</p>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
struct MyStruct {
    number: usize,
}

fn main() {}</code></pre></pre>
<p>ä½†æ˜¯å…¶ä»–çš„ç‰¹æ€§å°±æ¯”è¾ƒå›°éš¾äº†ï¼Œæ‰€ä»¥éœ€è¦ç”¨<code>impl</code>æ‰‹åŠ¨å®ç°ã€‚ä¾‹å¦‚ï¼Œ<code>Add</code>(åœ¨<code>std::ops::Add</code>å¤„æ‰¾åˆ°)æ˜¯ç”¨æ¥ç´¯åŠ ä¸¤ä¸ªä¸œè¥¿çš„ã€‚ä½†æ˜¯Rustå¹¶ä¸çŸ¥é“ä½ åˆ°åº•è¦æ€ä¹ˆç´¯åŠ ï¼Œæ‰€ä»¥ä½ å¿…é¡»å‘Šè¯‰å®ƒã€‚</p>
<pre><pre class="playground"><code class="language-rust">struct ThingsToAdd {
    first_thing: u32,
    second_thing: f32,
}

fn main() {}</code></pre></pre>
<p>æˆ‘ä»¬å¯ä»¥ç´¯åŠ <code>first_thing</code>å’Œ<code>second_thing</code>ï¼Œä½†æˆ‘ä»¬éœ€è¦æä¾›æ›´å¤šä¿¡æ¯ã€‚ä¹Ÿè®¸æˆ‘ä»¬æƒ³è¦ä¸€ä¸ª<code>f32</code>ï¼Œæ‰€ä»¥åƒè¿™æ ·:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
let result = self.second_thing + self.first_thing as f32
<span class="boring">}</span></code></pre></pre>
<p>ä½†ä¹Ÿè®¸æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªæ•´æ•°ï¼Œæ‰€ä»¥åƒè¿™æ ·:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
let result = self.second_thing as u32 + self.first_thing
<span class="boring">}</span></code></pre></pre>
<p>æˆ–è€…æˆ‘ä»¬æƒ³æŠŠ<code>self.first_thing</code>æ”¾åœ¨<code>self.second_thing</code>æ—è¾¹ï¼Œè¿™æ ·åŠ ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æŠŠ55åŠ åˆ°33.4ï¼Œæˆ‘ä»¬è¦çœ‹åˆ°çš„æ˜¯5533.4ï¼Œè€Œä¸æ˜¯88.4ã€‚</p>
<p>æ‰€ä»¥é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•åˆ›å»ºä¸€ä¸ªtraitã€‚å…³äº<code>trait</code>ï¼Œè¦è®°ä½çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼Œå®ƒä»¬æ˜¯å…³äºè¡Œä¸ºçš„ã€‚è¦åˆ›å»ºä¸€ä¸ªtraitï¼Œå†™ä¸‹å•è¯<code>trait</code>ï¼Œç„¶ååˆ›å»ºä¸€äº›å‡½æ•°ã€‚</p>
<pre><pre class="playground"><code class="language-rust">struct Animal { // A simple struct - an Animal only has a name
    name: String,
}

trait Dog { // The dog trait gives some functionality
    fn bark(&amp;self) { // It can bark
        println!("Woof woof!");
    }
    fn run(&amp;self) { // and it can run
        println!("The dog is running!");
    }
}

impl Dog for Animal {} // Now Animal has the trait Dog

fn main() {
    let rover = Animal {
        name: "Rover".to_string(),
    };

    rover.bark(); // Now Animal can use bark()
    rover.run();  // and it can use run()
}</code></pre></pre>
<p>è¿™ä¸ªæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸æƒ³æ‰“å° "ç‹—åœ¨è·‘"ã€‚å¦‚æœä½ æƒ³çš„è¯ï¼Œä½ å¯ä»¥æ”¹å˜<code>trait</code>ç»™ä½ çš„æ–¹æ³•ï¼Œä½†ä½ å¿…é¡»æœ‰ç›¸åŒçš„ç­¾åã€‚è¿™æ„å‘³ç€å®ƒéœ€è¦æ¥å—åŒæ ·çš„ä¸œè¥¿ï¼Œå¹¶è¿”å›åŒæ ·çš„ä¸œè¥¿ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜ <code>.run()</code> çš„æ–¹æ³•ï¼Œä½†æˆ‘ä»¬å¿…é¡»éµå¾ªç­¾åã€‚ç­¾åè¯´</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
fn run(&amp;self) {
    println!("The dog is running!");
}
<span class="boring">}</span></code></pre></pre>
<p><code>fn run(&amp;self)</code>çš„æ„æ€æ˜¯ "fn <code>run()</code>ä»¥<code>&amp;self</code>ä¸ºå‚æ•°ï¼Œä¸è¿”å›ä»»ä½•å†…å®¹"ã€‚æ‰€ä»¥ä½ ä¸èƒ½è¿™æ ·åš:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn run(&amp;self) -&gt; i32 { // âš ï¸
    5
}
<span class="boring">}</span></code></pre></pre>
<p>Rustä¼šè¯´ã€‚</p>
<pre><code class="language-text">   = note: expected fn pointer `fn(&amp;Animal)`
              found fn pointer `fn(&amp;Animal) -&gt; i32`
</code></pre>
<p>ä½†æˆ‘ä»¬å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<pre><pre class="playground"><code class="language-rust">struct Animal { // A simple struct - an Animal only has a name
    name: String,
}

trait Dog { // The dog trait gives some functionality
    fn bark(&amp;self) { // It can bark
        println!("Woof woof!");
    }
    fn run(&amp;self) { // and it can run
        println!("The dog is running!");
    }
}

impl Dog for Animal {
    fn run(&amp;self) {
        println!("{} is running!", self.name);
    }
}

fn main() {
    let rover = Animal {
        name: "Rover".to_string(),
    };

    rover.bark(); // Now Animal can use bark()
    rover.run();  // and it can use run()
}</code></pre></pre>
<p>ç°åœ¨å®ƒæ‰“å°çš„æ˜¯ <code>Rover is running!</code>ã€‚è¿™æ˜¯å¥½çš„ï¼Œå› ä¸ºæˆ‘ä»¬è¿”å›çš„æ˜¯ <code>()</code>ï¼Œæˆ–è€…è¯´ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œè¿™å°±æ˜¯traitæ‰€è¯´çš„ã€‚</p>
<p>å½“ä½ å†™ä¸€ä¸ªtraitçš„æ—¶å€™ï¼Œä½ å¯ä»¥ç›´æ¥å†™å‡½æ•°ç­¾åï¼Œä½†å¦‚æœä½ è¿™æ ·åšï¼Œç”¨æˆ·å°†ä¸å¾—ä¸å†™å‡½æ•°å®ç°ã€‚æˆ‘ä»¬æ¥è¯•è¯•ã€‚ç°åœ¨æˆ‘ä»¬æŠŠ<code>bark()</code>å’Œ<code>run()</code>æ”¹æˆåªè¯´<code>fn bark(&amp;self);</code>å’Œ<code>fn run(&amp;self);</code>ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å‡½æ•°å®ç°ï¼Œæ‰€ä»¥å¿…é¡»ç”±ç”¨æˆ·æ¥å†™ã€‚</p>
<pre><pre class="playground"><code class="language-rust">struct Animal {
    name: String,
}

trait Dog {
    fn bark(&amp;self); // bark() says it needs a &amp;self and returns nothing
    fn run(&amp;self); // run() says it needs a &amp;self and returns nothing.
                   // So now we have to write them ourselves.
}

impl Dog for Animal {
    fn bark(&amp;self) {
        println!("{}, stop barking!!", self.name);
    }
    fn run(&amp;self) {
        println!("{} is running!", self.name);
    }
}

fn main() {
    let rover = Animal {
        name: "Rover".to_string(),
    };

    rover.bark();
    rover.run();
}</code></pre></pre>
<p>æ‰€ä»¥ï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ªtraitæ—¶ï¼Œä½ å¿…é¡»æ€è€ƒ:"æˆ‘åº”è¯¥å†™å“ªäº›åŠŸèƒ½ï¼Ÿè€Œç”¨æˆ·åº”è¯¥å†™å“ªäº›å‡½æ•°ï¼Ÿ" å¦‚æœä½ è®¤ä¸ºç”¨æˆ·æ¯æ¬¡ä½¿ç”¨å‡½æ•°çš„æ–¹å¼åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå°±æŠŠå‡½æ•°å†™å‡ºæ¥ã€‚å¦‚æœä½ è®¤ä¸ºç”¨æˆ·ä¼šä»¥ä¸åŒçš„æ–¹å¼ä½¿ç”¨ï¼Œé‚£å°±å†™å‡ºå‡½æ•°ç­¾åå³å¯ã€‚</p>
<p>æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬å°è¯•ä¸ºæˆ‘ä»¬çš„structå®ç°Displayç‰¹æ€§ã€‚é¦–å…ˆæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„ç»“æ„ä½“:</p>
<pre><pre class="playground"><code class="language-rust">struct Cat {
    name: String,
    age: u8,
}

fn main() {
    let mr_mantle = Cat {
        name: "Reggie Mantle".to_string(),
        age: 4,
    };
}</code></pre></pre>
<p>ç°åœ¨æˆ‘ä»¬è¦æ‰“å°<code>mr_mantle</code>ã€‚è°ƒè¯•å¾ˆå®¹æ˜“å¾—å‡ºã€‚</p>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)]
struct Cat {
    name: String,
    age: u8,
}

fn main() {
    let mr_mantle = Cat {
        name: "Reggie Mantle".to_string(),
        age: 4,
    };

    println!("Mr. Mantle is a {:?}", mr_mantle);
}</code></pre></pre>
<p>ä½†Debugæ‰“å°ä¸æ˜¯æœ€æ¼‚äº®çš„æ–¹å¼ï¼Œå› ä¸ºå®ƒçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:</p>
<pre><code class="language-text">Mr. Mantle is a Cat { name: "Reggie Mantle", age: 4 }
</code></pre>
<p>å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ›´å¥½çš„æ‰“å°ï¼Œå°±éœ€è¦å®ç°<code>Display</code>ä¸º<code>Cat</code>ã€‚åœ¨<a href="https://doc.rust-lang.org/std/fmt/trait.Display.html">https://doc.rust-lang.org/std/fmt/trait.Display.html</a>ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Displayçš„ä¿¡æ¯ï¼Œè¿˜æœ‰ä¸€ä¸ªä¾‹å­ã€‚å®ƒè¯´</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt;

struct Position {
    longitude: f32,
    latitude: f32,
}

impl fmt::Display for Position {
    fn fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result {
        write!(f, "({}, {})", self.longitude, self.latitude)
    }
}

fn main() {}</code></pre></pre>
<p>æœ‰äº›éƒ¨åˆ†æˆ‘ä»¬è¿˜ä¸æ˜ç™½ï¼Œæ¯”å¦‚<code>&lt;'_&gt;</code>å’Œ<code>f</code>åœ¨åšä»€ä¹ˆã€‚ä½†æˆ‘ä»¬ç†è§£<code>Position</code>ç»“æ„ä½“:å®ƒåªæ˜¯ä¸¤ä¸ª<code>f32</code>ã€‚æˆ‘ä»¬ä¹Ÿæ˜ç™½ï¼Œ<code>self.longitude</code>å’Œ<code>self.latitude</code>æ˜¯ç»“æ„ä½“ä¸­çš„å­—æ®µã€‚æ‰€ä»¥ï¼Œä¹Ÿè®¸æˆ‘ä»¬çš„ç»“æ„ä½“å°±å¯ä»¥ç”¨è¿™ä¸ªä»£ç ï¼Œç”¨<code>self.name</code>å’Œ<code>self.age</code>ã€‚å¦å¤–ï¼Œ<code>write!</code>çœ‹èµ·æ¥å¾ˆåƒ<code>println!</code>ï¼Œæ‰€ä»¥å¾ˆç†Ÿæ‚‰ã€‚æ‰€ä»¥æˆ‘ä»¬è¿™æ ·å†™ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt;

struct Cat {
    name: String,
    age: u8,
}

impl fmt::Display for Cat {
    fn fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result {
        write!(f, "{} is a cat who is {} years old.", self.name, self.age)
    }
}

fn main() {}</code></pre></pre>
<p>è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª<code>fn main()</code>ã€‚ç°åœ¨æˆ‘ä»¬çš„ä»£ç æ˜¯è¿™æ ·çš„ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt;

struct Cat {
    name: String,
    age: u8,
}

impl fmt::Display for Cat {
  fn fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result {
      write!(f, "{} is a cat who is {} years old.", self.name, self.age)
  }
}

fn main() {
    let mr_mantle = Cat {
        name: "Reggie Mantle".to_string(),
        age: 4,
    };

    println!("{}", mr_mantle);
}</code></pre></pre>
<p>æˆåŠŸäº†! ç°åœ¨ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨<code>{}</code>æ‰“å°æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°<code>Reggie Mantle is a cat who is 4 years old.</code>ã€‚è¿™çœ‹èµ·æ¥å¥½å¤šäº†ã€‚</p>
<p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå¦‚æœä½ å®ç°äº†<code>Display</code>ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥å…è´¹å¾—åˆ°<code>ToString</code>çš„ç‰¹æ€§ã€‚è¿™æ˜¯å› ä¸ºä½ ä½¿ç”¨<code>format!</code>å®æ¥å®ç°<code>.fmt()</code>å‡½æ•°ï¼Œè¿™è®©ä½ å¯ä»¥ç”¨<code>.to_string()</code>æ¥åˆ›å»ºä¸€ä¸ª<code>String</code>ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åšè¿™æ ·çš„äº‹æƒ…ï¼Œæˆ‘ä»¬æŠŠ<code>reggie_mantle</code>ä¼ ç»™ä¸€ä¸ªæƒ³è¦<code>String</code>çš„å‡½æ•°ï¼Œæˆ–è€…å…¶ä»–ä»»ä½•ä¸œè¥¿ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt;
struct Cat {
    name: String,
    age: u8,
}

impl fmt::Display for Cat {
    fn fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result {
        write!(f, "{} is a cat who is {} years old.", self.name, self.age)
    }
}

fn print_cats(pet: String) {
    println!("{}", pet);
}

fn main() {
    let mr_mantle = Cat {
        name: "Reggie Mantle".to_string(),
        age: 4,
    };

    print_cats(mr_mantle.to_string()); // Turn him into a String here
    println!("Mr. Mantle's String is {} letters long.", mr_mantle.to_string().chars().count()); // Turn him into chars and count them
}</code></pre></pre>
<p>è¿™ä¸ªæ‰“å°:</p>
<pre><code class="language-text">Reggie Mantle is a cat who is 4 years old.
Mr. Mantle's String is 42 letters long.
</code></pre>
<p>å…³äºtraitï¼Œè¦è®°ä½çš„æ˜¯ï¼Œå®ƒä»¬æ˜¯å…³äºæŸäº›ä¸œè¥¿çš„è¡Œä¸ºã€‚ä½ çš„<code>struct</code>æ˜¯å¦‚ä½•è¡ŒåŠ¨çš„ï¼Ÿå®ƒèƒ½åšä»€ä¹ˆï¼Ÿè¿™å°±æ˜¯traitçš„ä½œç”¨ã€‚å¦‚æœä½ æƒ³æƒ³æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢æ‰€çœ‹åˆ°çš„ä¸€äº›traitï¼Œå®ƒä»¬éƒ½æ˜¯å…³äºè¡Œä¸ºçš„:<code>Copy</code>æ˜¯ä¸€ä¸ªç±»å‹å¯ä»¥åšçš„äº‹æƒ…ã€‚<code>Display</code>ä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹èƒ½åšçš„äº‹æƒ…ã€‚<code>ToString</code>æ˜¯å¦ä¸€ä¸ªtraitï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªç±»å‹å¯ä»¥åšçš„äº‹æƒ…:å®ƒå¯ä»¥å˜åŒ–æˆä¸€ä¸ª<code>String</code>ã€‚åœ¨æˆ‘ä»¬çš„ <code>Dog</code> traitä¸­ï¼Œ<em>Dog</em>è¿™ä¸ªè¯å¹¶ä¸æ„å‘³ç€ä½ èƒ½åšçš„äº‹æƒ…ï¼Œä½†å®ƒç»™å‡ºäº†ä¸€äº›è®©å®ƒåšäº‹æƒ…çš„æ–¹æ³•ã€‚
ä½ ä¹Ÿå¯ä»¥ä¸º <code>struct Poodle</code> æˆ– <code>struct Beagle</code> å®ç°å®ƒï¼Œå®ƒä»¬éƒ½ä¼šå¾—åˆ° <code>Dog</code> æ–¹æ³•ã€‚</p>
<p>è®©æˆ‘ä»¬å†çœ‹ä¸€ä¸ªä¸å•çº¯è¡Œä¸ºè”ç³»æ›´ç´§å¯†çš„ä¾‹å­ã€‚æˆ‘ä»¬å°†æƒ³è±¡ä¸€ä¸ªæœ‰ä¸€äº›ç®€å•è§’è‰²çš„å¹»æƒ³æ¸¸æˆã€‚ä¸€ä¸ªæ˜¯<code>Monster</code>ï¼Œå¦å¤–ä¸¤ä¸ªæ˜¯<code>Wizard</code>å’Œ<code>Ranger</code>ã€‚<code>Monster</code>åªæ˜¯æœ‰<code>health</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ”»å‡»å®ƒï¼Œå…¶ä»–ä¸¤ä¸ªè¿˜æ²¡æœ‰ä»€ä¹ˆã€‚ä½†æ˜¯æˆ‘ä»¬åšäº†ä¸¤ä¸ªtraitã€‚ä¸€ä¸ªå«<code>FightClose</code>ï¼Œè®©ä½ è¿‘èº«ä½œæˆ˜ã€‚å¦ä¸€ä¸ªæ˜¯<code>FightFromDistance</code>ï¼Œè®©ä½ åœ¨è¿œå¤„æˆ˜æ–—ã€‚åªæœ‰<code>Ranger</code>å¯ä»¥ä½¿ç”¨<code>FightFromDistance</code>ã€‚ä¸‹é¢æ˜¯å®ƒçš„æ ·å­:</p>
<pre><pre class="playground"><code class="language-rust">struct Monster {
    health: i32,
}

struct Wizard {}
struct Ranger {}

trait FightClose {
    fn attack_with_sword(&amp;self, opponent: &amp;mut Monster) {
        opponent.health -= 10;
        println!(
            "You attack with your sword. Your opponent now has {} health left.",
            opponent.health
        );
    }
    fn attack_with_hand(&amp;self, opponent: &amp;mut Monster) {
        opponent.health -= 2;
        println!(
            "You attack with your hand. Your opponent now has {} health left.",
            opponent.health
        );
    }
}
impl FightClose for Wizard {}
impl FightClose for Ranger {}

trait FightFromDistance {
    fn attack_with_bow(&amp;self, opponent: &amp;mut Monster, distance: u32) {
        if distance &lt; 10 {
            opponent.health -= 10;
            println!(
                "You attack with your bow. Your opponent now has {} health left.",
                opponent.health
            );
        }
    }
    fn attack_with_rock(&amp;self, opponent: &amp;mut Monster, distance: u32) {
        if distance &lt; 3 {
            opponent.health -= 4;
        }
        println!(
            "You attack with your rock. Your opponent now has {} health left.",
            opponent.health
        );
    }
}
impl FightFromDistance for Ranger {}

fn main() {
    let radagast = Wizard {};
    let aragorn = Ranger {};

    let mut uruk_hai = Monster { health: 40 };

    radagast.attack_with_sword(&amp;mut uruk_hai);
    aragorn.attack_with_bow(&amp;mut uruk_hai, 8);
}</code></pre></pre>
<p>è¿™ä¸ªæ‰“å°:</p>
<pre><code class="language-text">You attack with your sword. Your opponent now has 30 health left.
You attack with your bow. Your opponent now has 20 health left.
</code></pre>
<p>æˆ‘ä»¬åœ¨traité‡Œé¢ä¸€ç›´ä¼ é€’<code>self</code>ï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨ä¸èƒ½ç”¨å®ƒåšä»€ä¹ˆã€‚é‚£æ˜¯å› ä¸º Rust ä¸çŸ¥é“ä»€ä¹ˆç±»å‹ä¼šä½¿ç”¨å®ƒã€‚å®ƒå¯èƒ½æ˜¯ä¸€ä¸ª <code>Wizard</code>ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ª <code>Ranger</code>ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªå«åš <code>Toefocfgetobjtnode</code> çš„æ–°ç»“æ„ï¼Œæˆ–è€…å…¶ä»–ä»»ä½•ä¸œè¥¿ã€‚ä¸ºäº†è®©<code>self</code>å…·æœ‰ä¸€å®šçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨traitä¸­æ·»åŠ å¿…è¦çš„traitã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ç”¨<code>{:?}</code>æ‰“å°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦<code>Debug</code>ã€‚ä½ åªè¦æŠŠå®ƒå†™åœ¨<code>:</code>(å†’å·)åé¢ï¼Œå°±å¯ä»¥æŠŠå®ƒæ·»åŠ åˆ°traitä¸­ã€‚ç°åœ¨æˆ‘ä»¬çš„ä»£ç æ˜¯è¿™æ ·çš„ã€‚</p>
<pre><pre class="playground"><code class="language-rust">struct Monster {
    health: i32,
}

#[derive(Debug)] // Now Wizard has Debug
struct Wizard {
    health: i32, // Now Wizard has health
}
#[derive(Debug)] // So does Ranger
struct Ranger {
    health: i32, // So does Ranger
}

trait FightClose: std::fmt::Debug { // Now a type needs Debug to use FightClose
    fn attack_with_sword(&amp;self, opponent: &amp;mut Monster) {
        opponent.health -= 10;
        println!(
            "You attack with your sword. Your opponent now has {} health left. You are now at: {:?}", // We can now print self with {:?} because we have Debug
            opponent.health, &amp;self
        );
    }
    fn attack_with_hand(&amp;self, opponent: &amp;mut Monster) {
        opponent.health -= 2;
        println!(
            "You attack with your hand. Your opponent now has {} health left.  You are now at: {:?}",
            opponent.health, &amp;self
        );
    }
}
impl FightClose for Wizard {}
impl FightClose for Ranger {}

trait FightFromDistance: std::fmt::Debug { // We could also do trait FightFromDistance: FightClose because FightClose needs Debug
    fn attack_with_bow(&amp;self, opponent: &amp;mut Monster, distance: u32) {
        if distance &lt; 10 {
            opponent.health -= 10;
            println!(
                "You attack with your bow. Your opponent now has {} health left.  You are now at: {:?}",
                opponent.health, self
            );
        }
    }
    fn attack_with_rock(&amp;self, opponent: &amp;mut Monster, distance: u32) {
        if distance &lt; 3 {
            opponent.health -= 4;
        }
        println!(
            "You attack with your rock. Your opponent now has {} health left.  You are now at: {:?}",
            opponent.health, self
        );
    }
}
impl FightFromDistance for Ranger {}

fn main() {
    let radagast = Wizard { health: 60 };
    let aragorn = Ranger { health: 80 };

    let mut uruk_hai = Monster { health: 40 };

    radagast.attack_with_sword(&amp;mut uruk_hai);
    aragorn.attack_with_bow(&amp;mut uruk_hai, 8);
}</code></pre></pre>
<p>ç°åœ¨è¿™ä¸ªæ‰“å°:</p>
<pre><code class="language-text">You attack with your sword. Your opponent now has 30 health left. You are now at: Wizard { health: 60 }
You attack with your bow. Your opponent now has 20 health left.  You are now at: Ranger { health: 80 }
</code></pre>
<p>åœ¨çœŸå®çš„æ¸¸æˆä¸­ï¼Œå¯èƒ½æœ€å¥½ä¸ºæ¯ä¸ªç±»å‹é‡å†™è¿™ä¸ªï¼Œå› ä¸º<code>You are now at: Wizard { health: 60 }</code>çœ‹èµ·æ¥æœ‰ç‚¹å¯ç¬‘ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆtraité‡Œé¢çš„æ–¹æ³•é€šå¸¸å¾ˆç®€å•ï¼Œå› ä¸ºä½ ä¸çŸ¥é“ä»€ä¹ˆç±»å‹ä¼šä½¿ç”¨å®ƒã€‚ä¾‹å¦‚ï¼Œä½ ä¸èƒ½å†™å‡º <code>self.0 += 10</code> è¿™æ ·çš„ä¸œè¥¿ã€‚ä½†æ˜¯è¿™ä¸ªä¾‹å­è¡¨æ˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬æ­£åœ¨å†™çš„traité‡Œé¢ä½¿ç”¨å…¶ä»–çš„traitã€‚å½“æˆ‘ä»¬è¿™æ ·åšçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€äº›æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ã€‚</p>
<p>å¦å¤–ä¸€ç§ä½¿ç”¨traitçš„æ–¹å¼æ˜¯ä½¿ç”¨æ‰€è°“çš„<code>trait bounds</code>ã€‚æ„æ€æ˜¯ "é€šè¿‡ä¸€ä¸ªtraitè¿›è¡Œé™åˆ¶"ã€‚traité™åˆ¶å¾ˆç®€å•ï¼Œå› ä¸ºä¸€ä¸ªtraitå®é™…ä¸Šä¸éœ€è¦ä»»ä½•æ–¹æ³•ï¼Œæˆ–è€…è¯´æ ¹æœ¬ä¸éœ€è¦ä»»ä½•ä¸œè¥¿ã€‚è®©æˆ‘ä»¬ç”¨ç±»ä¼¼ä½†ä¸åŒçš„ä¸œè¥¿é‡å†™æˆ‘ä»¬çš„ä»£ç ã€‚è¿™æ¬¡æˆ‘ä»¬çš„traitæ²¡æœ‰ä»»ä½•æ–¹æ³•ï¼Œä½†æˆ‘ä»¬æœ‰å…¶ä»–éœ€è¦traitä½¿ç”¨çš„å‡½æ•°ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt::Debug;  // So we don't have to write std::fmt::Debug every time now

struct Monster {
    health: i32,
}

#[derive(Debug)]
struct Wizard {
    health: i32,
}
#[derive(Debug)]
struct Ranger {
    health: i32,
}

trait Magic{} // No methods for any of these traits. They are just trait bounds
trait FightClose {}
trait FightFromDistance {}

impl FightClose for Ranger{} // Each type gets FightClose,
impl FightClose for Wizard {}
impl FightFromDistance for Ranger{} // but only Ranger gets FightFromDistance
impl Magic for Wizard{}  // and only Wizard gets Magic

fn attack_with_bow&lt;T: FightFromDistance + Debug&gt;(character: &amp;T, opponent: &amp;mut Monster, distance: u32) {
    if distance &lt; 10 {
        opponent.health -= 10;
        println!(
            "You attack with your bow. Your opponent now has {} health left.  You are now at: {:?}",
            opponent.health, character
        );
    }
}

fn attack_with_sword&lt;T: FightClose + Debug&gt;(character: &amp;T, opponent: &amp;mut Monster) {
    opponent.health -= 10;
    println!(
        "You attack with your sword. Your opponent now has {} health left. You are now at: {:?}",
        opponent.health, character
    );
}

fn fireball&lt;T: Magic + Debug&gt;(character: &amp;T, opponent: &amp;mut Monster, distance: u32) {
    if distance &lt; 15 {
        opponent.health -= 20;
        println!("You raise your hands and cast a fireball! Your opponent now has {} health left. You are now at: {:?}",
    opponent.health, character);
    }
}

fn main() {
    let radagast = Wizard { health: 60 };
    let aragorn = Ranger { health: 80 };

    let mut uruk_hai = Monster { health: 40 };

    attack_with_sword(&amp;radagast, &amp;mut uruk_hai);
    attack_with_bow(&amp;aragorn, &amp;mut uruk_hai, 8);
    fireball(&amp;radagast, &amp;mut uruk_hai, 8);
}</code></pre></pre>
<p>è¿™ä¸ªæ‰“å°å‡ºæ¥çš„ä¸œè¥¿å‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚</p>
<pre><code class="language-text">You attack with your sword. Your opponent now has 30 health left. You are now at: Wizard { health: 60 }
You attack with your bow. Your opponent now has 20 health left.  You are now at: Ranger { health: 80 }
You raise your hands and cast a fireball! Your opponent now has 0 health left. You are now at: Wizard { health: 60 }
</code></pre>
<p>æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°ï¼Œå½“ä½ ä½¿ç”¨traitsæ—¶ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåŒæ ·çš„äº‹æƒ…ã€‚è¿™ä¸€åˆ‡éƒ½å–å†³äºä»€ä¹ˆå¯¹ä½ æ­£åœ¨ç¼–å†™çš„ç¨‹åºæœ€æœ‰æ„ä¹‰ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°ä¸€äº›åœ¨Rustä¸­ä½¿ç”¨çš„ä¸»è¦traitã€‚</p>
<h3 id="from-trait"><a class="header" href="#from-trait">From trait</a></h3>
<p><em>From</em>æ˜¯ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„traitï¼Œä½ çŸ¥é“è¿™ä¸€ç‚¹ï¼Œå› ä¸ºä½ å·²ç»çœ‹åˆ°äº†å¾ˆå¤šã€‚ä½¿ç”¨<em>From</em>ï¼Œä½ å¯ä»¥ä»ä¸€ä¸ª<code>&amp;str</code>åˆ›å»ºä¸€ä¸ª<code>String</code>ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨è®¸å¤šå…¶ä»–ç±»å‹åˆ›å»ºå¤šç§ç±»å‹ã€‚ä¾‹å¦‚ï¼ŒVecä½¿ç”¨<em>From</em>æ¥åˆ›å»ºä»¥ä¸‹ç±»å‹:</p>
<pre><code class="language-text">From&lt;&amp;'_ [T]&gt;
From&lt;&amp;'_ mut [T]&gt;
From&lt;&amp;'_ str&gt;
From&lt;&amp;'a Vec&lt;T&gt;&gt;
From&lt;[T; N]&gt;
From&lt;BinaryHeap&lt;T&gt;&gt;
From&lt;Box&lt;[T]&gt;&gt;
From&lt;CString&gt;
From&lt;Cow&lt;'a, [T]&gt;&gt;
From&lt;String&gt;
From&lt;Vec&lt;NonZeroU8&gt;&gt;
From&lt;Vec&lt;T&gt;&gt;
From&lt;VecDeque&lt;T&gt;&gt;
</code></pre>
<p>è¿™é‡Œæœ‰å¾ˆå¤š<code>Vec::from()</code>æˆ‘ä»¬è¿˜æ²¡æœ‰ç”¨è¿‡ã€‚æˆ‘ä»¬æ¥åšå‡ ä¸ªï¼Œçœ‹çœ‹ä¼šæ€ä¹ˆæ ·:</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt::Display; // We will make a generic function to print them so we want Display

fn print_vec&lt;T: Display&gt;(input: &amp;Vec&lt;T&gt;) { // Take any Vec&lt;T&gt; if type T has Display
    for item in input {
        print!("{} ", item);
    }
    println!();
}

fn main() {

    let array_vec = Vec::from([8, 9, 10]); // Try from an array
    print_vec(&amp;array_vec);

    let str_vec = Vec::from("What kind of vec will I be?"); // An array from a &amp;str? This will be interesting
    print_vec(&amp;str_vec);

    let string_vec = Vec::from("What kind of vec will a String be?".to_string()); // Also from a String
    print_vec(&amp;string_vec);
}</code></pre></pre>
<p>å®ƒæ‰“å°çš„å†…å®¹å¦‚ä¸‹ã€‚</p>
<pre><code class="language-text">8 9 10
87 104 97 116 32 107 105 110 100 32 111 102 32 118 101 99 32 119 105 108 108 32 73 32 98 101 63
87 104 97 116 32 107 105 110 100 32 111 102 32 118 101 99 32 119 105 108 108 32 97 32 83 116 114 105 110 103 32 98 101 63
</code></pre>
<p>å¦‚æœä»ç±»å‹ä¸Šçœ‹ï¼Œç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‘é‡æ˜¯<code>Vec&lt;u8&gt;</code>ï¼Œä¹Ÿå°±æ˜¯<code>&amp;str</code>å’Œ<code>String</code>çš„å­—èŠ‚ã€‚æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°<code>From</code>æ˜¯éå¸¸çµæ´»çš„ï¼Œç”¨çš„ä¹Ÿå¾ˆå¤šã€‚æˆ‘ä»¬ç”¨è‡ªå·±çš„ç±»å‹æ¥è¯•è¯•ã€‚</p>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ªç»“æ„ä½“ï¼Œç„¶åä¸ºå…¶ä¸­ä¸€ä¸ªç»“æ„ä½“å®ç°<code>From</code>ã€‚ä¸€ä¸ªç»“æ„ä½“å°†æ˜¯<code>City</code>ï¼Œå¦ä¸€ä¸ªç»“æ„ä½“å°†æ˜¯<code>Country</code>ã€‚æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ã€‚<code>let country_name = Country::from(vector_of_cities)</code>.</p>
<p>å®ƒçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:</p>
<pre><pre class="playground"><code class="language-rust">#[derive(Debug)] // So we can print City
struct City {
    name: String,
    population: u32,
}

impl City {
    fn new(name: &amp;str, population: u32) -&gt; Self { // just a new function
        Self {
            name: name.to_string(),
            population,
        }
    }
}
#[derive(Debug)] // Country also needs to be printed
struct Country {
    cities: Vec&lt;City&gt;, // Our cities go in here
}

impl From&lt;Vec&lt;City&gt;&gt; for Country { // Note: we don't have to write From&lt;City&gt;, we can also do
                                   // From&lt;Vec&lt;City&gt;&gt;. So we can also implement on a type that
                                   // we didn't create
    fn from(cities: Vec&lt;City&gt;) -&gt; Self {
        Self { cities }
    }
}

impl Country {
    fn print_cities(&amp;self) { // function to print the cities in Country
        for city in &amp;self.cities {
            // &amp; because Vec&lt;City&gt; isn't Copy
            println!("{:?} has a population of {:?}.", city.name, city.population);
        }
    }
}

fn main() {
    let helsinki = City::new("Helsinki", 631_695);
    let turku = City::new("Turku", 186_756);

    let finland_cities = vec![helsinki, turku]; // This is the Vec&lt;City&gt;
    let finland = Country::from(finland_cities); // So now we can use From

    finland.print_cities();
}</code></pre></pre>
<p>è¿™ä¸ªå°†æ‰“å°:</p>
<pre><code class="language-text">"Helsinki" has a population of 631695.
"Turku" has a population of 186756.
</code></pre>
<p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œ<code>From</code>å¾ˆå®¹æ˜“ä»ä½ æ²¡æœ‰åˆ›å»ºçš„ç±»å‹ä¸­å®ç°ï¼Œæ¯”å¦‚<code>Vec</code>ã€<code>i32</code>ç­‰ç­‰ã€‚è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæœ‰ä¸¤ä¸ªå‘é‡çš„å‘é‡ã€‚ç¬¬ä¸€ä¸ªå‘é‡å­˜æ”¾å¶æ•°ï¼Œç¬¬äºŒä¸ªå‘é‡å­˜æ”¾å¥‡æ•°ã€‚å¯¹äº<code>From</code>ï¼Œä½ å¯ä»¥ç»™å®ƒä¸€ä¸ª<code>i32</code>çš„å‘é‡ï¼Œå®ƒä¼šæŠŠå®ƒå˜æˆ<code>Vec&lt;Vec&lt;i32&gt;&gt;</code>:ä¸€ä¸ªå®¹çº³<code>i32</code>çš„å‘é‡ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::convert::From;

struct EvenOddVec(Vec&lt;Vec&lt;i32&gt;&gt;);

impl From&lt;Vec&lt;i32&gt;&gt; for EvenOddVec {
    fn from(input: Vec&lt;i32&gt;) -&gt; Self {
        let mut even_odd_vec: Vec&lt;Vec&lt;i32&gt;&gt; = vec![vec![], vec![]]; // A vec with two empty vecs inside
                                                                    // This is the return value but first we must fill it
        for item in input {
            if item % 2 == 0 {
                even_odd_vec[0].push(item);
            } else {
                even_odd_vec[1].push(item);
            }
        }
        Self(even_odd_vec) // Now it is done so we return it as Self (Self = EvenOddVec)
    }
}

fn main() {
    let bunch_of_numbers = vec![8, 7, -1, 3, 222, 9787, -47, 77, 0, 55, 7, 8];
    let new_vec = EvenOddVec::from(bunch_of_numbers);

    println!("Even numbers: {:?}\nOdd numbers: {:?}", new_vec.0[0], new_vec.0[1]);
}</code></pre></pre>
<p>è¿™ä¸ªæ‰“å°:</p>
<pre><code class="language-text">Even numbers: [8, 222, 0, 8]
Odd numbers: [7, -1, 3, 9787, -47, 77, 55, 7]
</code></pre>
<p>åƒ <code>EvenOddVec</code> è¿™æ ·çš„ç±»å‹å¯èƒ½æœ€å¥½æ˜¯é€šç”¨ <code>T</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è®¸å¤šæ•°å­—ç±»å‹ã€‚å¦‚æœä½ æƒ³ç»ƒä¹ çš„è¯ï¼Œä½ å¯ä»¥è¯•ç€æŠŠè¿™ä¸ªä¾‹å­åšæˆé€šç”¨çš„ã€‚</p>
<h3 id="åœ¨å‡½æ•°ä¸­ä½¿ç”¨å­—ç¬¦ä¸²å’Œstr"><a class="header" href="#åœ¨å‡½æ•°ä¸­ä½¿ç”¨å­—ç¬¦ä¸²å’Œstr">åœ¨å‡½æ•°ä¸­ä½¿ç”¨å­—ç¬¦ä¸²å’Œ&amp;str</a></h3>
<p>æœ‰æ—¶ä½ æƒ³è®©ä¸€ä¸ªå‡½æ•°å¯ä»¥åŒæ—¶æ¥å— <code>String</code> å’Œ <code>&amp;str</code>ã€‚ä½ å¯ä»¥é€šè¿‡æ³›å‹å’Œ <code>AsRef</code> ç‰¹æ€§æ¥å®ç°è¿™ä¸€ç‚¹ã€‚<code>AsRef</code> ç”¨äºä»ä¸€ä¸ªç±»å‹å‘å¦ä¸€ä¸ªç±»å‹æä¾›å¼•ç”¨ã€‚å¦‚æœä½ çœ‹çœ‹ <code>String</code> çš„æ–‡æ¡£ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒå¯¹è®¸å¤šç±»å‹éƒ½æœ‰ <code>AsRef</code>ã€‚</p>
<p><a href="https://doc.rust-lang.org/std/string/struct.String.html">https://doc.rust-lang.org/std/string/struct.String.html</a></p>
<p>ä¸‹é¢æ˜¯å®ƒä»¬çš„ä¸€äº›å‡½æ•°ç­¾åã€‚</p>
<p><code>AsRef&lt;str&gt;</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
impl AsRef&lt;str&gt; for String

fn as_ref(&amp;self) -&gt; &amp;str
<span class="boring">}</span></code></pre></pre>
<p><code>AsRef&lt;[u8]&gt;</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
impl AsRef&lt;[u8]&gt; for String

fn as_ref(&amp;self) -&gt; &amp;[u8]
<span class="boring">}</span></code></pre></pre>
<p><code>AsRef&lt;OsStr&gt;</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ğŸš§
impl AsRef&lt;OsStr&gt; for String

fn as_ref(&amp;self) -&gt; &amp;OsStr
<span class="boring">}</span></code></pre></pre>
<p>ä½ å¯ä»¥çœ‹åˆ°ï¼Œå®ƒéœ€è¦<code>&amp;self</code>ï¼Œå¹¶ç»™å‡ºå¦ä¸€ä¸ªç±»å‹çš„å¼•ç”¨ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªé€šç”¨ç±»å‹Tï¼Œä½ å¯ä»¥è¯´å®ƒéœ€è¦<code>AsRef&lt;str&gt;</code>ã€‚å¦‚æœä½ è¿™æ ·åšï¼Œå®ƒå°†èƒ½å¤Ÿä½¿ç”¨ä¸€ä¸ª<code>&amp;str</code>å’Œä¸€ä¸ª<code>String</code>ã€‚</p>
<p>æˆ‘ä»¬å…ˆè¯´è¯´æ³›å‹å‡½æ•°ã€‚è¿™ä¸ªè¿˜ä¸èƒ½ç”¨ã€‚</p>
<pre><pre class="playground"><code class="language-rust">fn print_it&lt;T&gt;(input: T) {
    println!("{}", input) // âš ï¸
}

fn main() {
    print_it("Please print me");
}</code></pre></pre>
<p>Rustè¯´<code>error[E0277]: T doesn't implement std::fmt::Display</code>ã€‚æ‰€ä»¥æˆ‘ä»¬ä¼šè¦æ±‚Tå®ç°Displayã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt::Display;

fn print_it&lt;T: Display&gt;(input: T) {
    println!("{}", input)
}

fn main() {
    print_it("Please print me");
}</code></pre></pre>
<p>ç°åœ¨å¯ä»¥ç”¨äº†ï¼Œæ‰“å°å‡º<code>Please print me</code>ã€‚è¿™æ˜¯å¥½çš„ï¼Œä½†Tä»ç„¶å¯ä»¥æ˜¯å¤šç§ç±»å‹ã€‚
å¯ä»¥æ˜¯<code>i8</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯<code>f32</code>ï¼Œæˆ–è€…å…¶ä»–ä»»ä½•å®ç°äº†<code>Display</code>çš„ç±»å‹ã€‚æˆ‘ä»¬åŠ ä¸Š<code>AsRef&lt;str&gt;</code>ï¼Œç°åœ¨Téœ€è¦<code>AsRef&lt;str&gt;</code>å’Œ<code>Display</code>ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt::Display;

fn print_it&lt;T: AsRef&lt;str&gt; + Display&gt;(input: T) {
    println!("{}", input)
}

fn main() {
    print_it("Please print me");
    print_it("Also, please print me".to_string());
    // print_it(7); &lt;- This will not print
}</code></pre></pre>
<p>ç°åœ¨ï¼Œå®ƒä¸ä¼šæ¥å—<code>i8</code>è¿™æ ·çš„ç±»å‹ã€‚</p>
<p>ä¸è¦å¿˜äº†ï¼Œå½“å‡½æ•°å˜é•¿æ—¶ï¼Œä½ å¯ä»¥ç”¨<code>where</code>æ¥å†™ä¸åŒçš„å‡½æ•°ã€‚å¦‚æœæˆ‘ä»¬åŠ ä¸ŠDebugï¼Œé‚£ä¹ˆå°±ä¼šå˜æˆ<code>fn print_it&lt;T: AsRef&lt;str&gt; + Display + Debug&gt;(input: T)</code>ï¼Œè¿™ä¸€è¡Œå°±å¾ˆé•¿äº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ã€‚</p>
<pre><pre class="playground"><code class="language-rust">use std::fmt::{Debug, Display}; // add Debug

fn print_it&lt;T&gt;(input: T) // Now this line is easy to read
where
    T: AsRef&lt;str&gt; + Debug + Display, // and these traits are easy to read
{
    println!("{}", input)
}

fn main() {
    print_it("Please print me");
    print_it("Also, please print me".to_string());
}</code></pre></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="Chapter_33.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="Chapter_35.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="Chapter_33.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="Chapter_35.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
